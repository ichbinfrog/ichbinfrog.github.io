<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="Dans le cadre de ce projet, nous avons construit un stockage orient√© colonne destin√© √† r√©pondre √† un ensemble de question sur des donn√©es METAR (c&amp;rsquo;est-√†-dire des donn√©es m√©t√©orologiques pour l&amp;rsquo;aviation). D&amp;rsquo;une mani√®re plus concr√®te, notre jeu de donn√©es est restreint dans l&amp;rsquo;espace (exclusivement en Finlande) et dans le temps (entre le 1er Janvier 2004 au 1er Janvier 2014). Puisque dans ce cas, les trois questions ne peuvent pas √™tre r√©pondus par une mod√©lisation commune, nous allons traiter dans ce rapport selon l&amp;rsquo;ordre des questions." />
<meta name="keywords" content=", datawarehouse, cassandra" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://ichbinfrog.github.io/university/metar/" />
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$']],
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            TeX: {
                equationNumbers: { autoNumber: "AMS" },
                extensions: ["AMSmath.js", "AMSsymbols.js"]
            }
        }
    });
    MathJax.Hub.Queue(function () {
        
        
        
        var all = MathJax.Hub.getAllJax(), i;
        for (i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });

    MathJax.Hub.Config({
        
        TeX: { equationNumbers: { autoNumber: "AMS" } }
    });
</script>


    <title>
        
            üá´üá∑ METAR data analysis &amp; warehousing with Cassandra :: Hoang Quoc Trung 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.min.cbd9ce6c3a26d6c4a5eb4b8834c18d83518654bd8bac1fc8160486f336181c9a.css">


    
        <link rel="stylesheet" type="text/css" href="/css/post.css">
    





<meta itemprop="name" content="üá´üá∑ METAR data analysis &amp; warehousing with Cassandra">
<meta itemprop="description" content="Dans le cadre de ce projet, nous avons construit un stockage orient√© colonne destin√© √† r√©pondre √† un ensemble de question sur des donn√©es METAR (c&rsquo;est-√†-dire des donn√©es m√©t√©orologiques pour l&rsquo;aviation). D&rsquo;une mani√®re plus concr√®te, notre jeu de donn√©es est restreint dans l&rsquo;espace (exclusivement en Finlande) et dans le temps (entre le 1er Janvier 2004 au 1er Janvier 2014). Puisque dans ce cas, les trois questions ne peuvent pas √™tre r√©pondus par une mod√©lisation commune, nous allons traiter dans ce rapport selon l&rsquo;ordre des questions.">
<meta itemprop="datePublished" content="2018-12-21T15:37:55&#43;02:00" />
<meta itemprop="dateModified" content="2018-12-21T15:37:55&#43;02:00" />
<meta itemprop="wordCount" content="1782">
<meta itemprop="image" content="https://ichbinfrog.github.io/"/>



<meta itemprop="keywords" content="datawarehouse,cassandra," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://ichbinfrog.github.io/"/>

<meta name="twitter:title" content="üá´üá∑ METAR data analysis &amp; warehousing with Cassandra"/>
<meta name="twitter:description" content="Dans le cadre de ce projet, nous avons construit un stockage orient√© colonne destin√© √† r√©pondre √† un ensemble de question sur des donn√©es METAR (c&rsquo;est-√†-dire des donn√©es m√©t√©orologiques pour l&rsquo;aviation). D&rsquo;une mani√®re plus concr√®te, notre jeu de donn√©es est restreint dans l&rsquo;espace (exclusivement en Finlande) et dans le temps (entre le 1er Janvier 2004 au 1er Janvier 2014). Puisque dans ce cas, les trois questions ne peuvent pas √™tre r√©pondus par une mod√©lisation commune, nous allons traiter dans ce rapport selon l&rsquo;ordre des questions."/>



    <meta property="og:title" content="üá´üá∑ METAR data analysis &amp; warehousing with Cassandra" />
<meta property="og:description" content="Dans le cadre de ce projet, nous avons construit un stockage orient√© colonne destin√© √† r√©pondre √† un ensemble de question sur des donn√©es METAR (c&rsquo;est-√†-dire des donn√©es m√©t√©orologiques pour l&rsquo;aviation). D&rsquo;une mani√®re plus concr√®te, notre jeu de donn√©es est restreint dans l&rsquo;espace (exclusivement en Finlande) et dans le temps (entre le 1er Janvier 2004 au 1er Janvier 2014). Puisque dans ce cas, les trois questions ne peuvent pas √™tre r√©pondus par une mod√©lisation commune, nous allons traiter dans ce rapport selon l&rsquo;ordre des questions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ichbinfrog.github.io/university/metar/" />
<meta property="og:image" content="https://ichbinfrog.github.io/"/>
<meta property="article:published_time" content="2018-12-21T15:37:55+02:00" />
<meta property="article:modified_time" content="2018-12-21T15:37:55+02:00" /><meta property="og:site_name" content="Hoang Quoc Trung" />






    <meta property="article:published_time" content="2018-12-21 15:37:55 &#43;0200 &#43;0200" />








    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">ichbinfrog</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://ichbinfrog.github.io/projects">0_projects</a></li><li><a href="https://ichbinfrog.github.io/internships">1_internships</a></li><li><a href="https://ichbinfrog.github.io/university">2_uni_works</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title" id="top"><a href="https://ichbinfrog.github.io/university/metar/">üá´üá∑ METAR data analysis &amp; warehousing with Cassandra</a></h2>
            <aside id="toc"><style>
.toc {
    position: fixed;
    top: 50%;
    left: 2%;
    width: 20%;
    transform: translateY(-50%);
    border-radius: 5px;
    padding-bottom: 1rem;
}

.toc a {
    text-decoration: none;
    color: gray;
}

.toc a:hover {
    opacity: 0.5;
}

.toc ul {
    list-style: ">  ";
}

.toc-title {
    text-decoration: underline;
}
</style>

<div class="toc">
    <div class="toc-title">Table of Contents</div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#pr√©visualisation-du-jeu-de-donn√©es">Pr√©visualisation du jeu de donn√©es</a></li>
    <li><a href="#premi√®re-question">Premi√®re question</a></li>
    <li><a href="#deuxi√®me-question">Deuxi√®me question</a></li>
    <li><a href="#troisi√®me-question">Troisi√®me Question</a></li>
    <li><a href="#analyse-des-performances">Analyse des performances</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    <ul>
    <li><a href="#top">Top</a></li>
    <li><a href="#end">End</a></li>
    </ul>
</div></aside>

            

            <div class="post-content">
                <p>Dans le cadre de ce projet, nous avons construit un stockage orient√© colonne destin√© √† r√©pondre √† un ensemble de question sur des donn√©es METAR (c&rsquo;est-√†-dire des donn√©es m√©t√©orologiques pour l&rsquo;aviation). D&rsquo;une mani√®re plus concr√®te, notre jeu de donn√©es est restreint dans l&rsquo;espace (exclusivement en Finlande) et dans le temps (entre le 1er Janvier 2004 au 1er Janvier 2014). Puisque dans ce cas, les trois questions ne peuvent pas √™tre r√©pondus par une mod√©lisation commune, nous allons traiter dans ce rapport selon l&rsquo;ordre des questions.</p>
<h2 id="pr√©visualisation-du-jeu-de-donn√©es">Pr√©visualisation du jeu de donn√©es</h2>
<p>Les donn√©es venant de la base de donn√©es IEM (Iowa Environmental Mesonet) correspondent √† des donn√©e ASOS (une sous-famille des donn√©es METAR) sont constitu√©es de $30$ variables.</p>
<p>Les attributs ${timestamp, longitude, latitude, altitude}$ permettent de d√©finir d&rsquo;une mani√®re unique un enregistrement, autrement dit, √† un instant $t$ donn√©, √† la latitude $lat$, la longitude $long$ et l&rsquo;altitude $alt$, il ne peut exister qu&rsquo;une seule observation. L&rsquo;unicit√© de l&rsquo;observation est renforc√© par le formattage du timestamp qui est normalis√© sur UTC (Universel Temps Coordonn√©). Dans les sections qui suivent, il est important de noter que toutes les donn√©es nulles/absentes sont not√©es &ldquo;null&rdquo; et que les donn√©es forment des vecteurs creuses.</p>
<h2 id="premi√®re-question">Premi√®re question</h2>
<blockquote>
<p>Pour un point donn√© de l‚Äôespace, je veux pouvoir avoir un historique du pass√©, avec des courbes adapt√©es. Je vous pouvoir mettre en √©vidence la saisonnalit√© et les √©carts √† la saisonnalit√©.</p>
</blockquote>

<img src="/img/metar_geohash.jpg"  class="center"  />


<p>Afin de pouvoir identifier un <strong>point donn√© de l&rsquo;espace</strong>, nous pouvons utilis√© le tripplet $(long, lat, alt)$. N√©anmoins, cette m√©thode est tr√®s restrictive notamment si on veut appliquer cette requ√™te sur une zone dans l&rsquo;espace. Nous avons donc choisi d&rsquo;utiliser le <strong>geohash</strong>. Ce dernier est une fonction de hashage qui subdivise la surface terrestre selon une grille hi√©rarchique. D&rsquo;une mani√®re plus concr√®te, soit $G \subset \mathbb{R}^{2}$ l&rsquo;ensemble des coordonn√©es g√©ographiques et $W_p$ l&rsquo;ensemble des cha√Ænes alphab√©tiques de longueur $p$ (qui correspond √† la pr√©cision du geohash), on a:</p>
<p>$$geohash :\quad G \rightarrow W_p$$</p>
<p>$$(lat,lon) \mapsto geohash(lat, lon)\ avec\ len(geohash)=p$$</p>
<p>N√©anmoins, mettre l&rsquo;ensemble du geohash en cl√© de partitionnement va nous aboutir au m√™me probl√®me d&rsquo;avoir des partitions trop fines. Puisqu&rsquo;il s&rsquo;agit d&rsquo;un hash hi√©rarchique, le geohash permet de s&rsquo;assurer que deux hash commen√ßant par la m√™me lettre sont dans le m√™me pav√©, ce qui garantit la coh√©rence des donn√©es vis-√†-vis du partitionnement. On peut donc s√©parer le hash en deux, une partie allant dans la cl√© de partitionnement (qu&rsquo;on note $geohash_{key}$), l&rsquo;autre dans la surclef ($geohash_{part}$). Gr√¢ce √† l&rsquo;algorithme de preuve (Voir helper.py), on a d√©duit qu&rsquo;avec notre jeu de donn√©es, la conception optimale sera :</p>
<p>$$geohash :\quad G \rightarrow W_p$$</p>
<p>$$\quad (lat,lon) \mapsto geohash(lat, lon) = geohash_{key} + geohash_{hash}$$</p>
<p>$$avec\ len(geohash_{key})=2\ et\ len(geohash_{part})=p -2$$</p>
<p>En ce qui concerne l&rsquo;<strong>historique</strong>, nous avons choisi de clusteriser selon l&rsquo;ann√©e afin de faciliter la lecture tout en permettant √† un partitionnement capable d&rsquo;√©voluer au cours du temps. De plus, √©tant donn√© qu&rsquo;il s&rsquo;agit d&rsquo;un historique (c&rsquo;est-√†-dire qu&rsquo;on cherche toutes les informations depuis une date pr√©cise jusqu&rsquo;√† la date actuelle), on peut impl√©menter des cl√©s de tris du type $mois, jour, heure, seconde$. N√©anmoins, cette impl√©mentation pose probl√®me avec l&rsquo;historique puisque ce dernier n√©cessite une suite d&rsquo;op√©rateurs de comparaison $&gt;$ (interdite par scylla). On a donc concat√©n√© ces valeurs dans un entier $timestamp_{rest}$ qui permettrait cette comparaison.</p>
<p>De plus, afin de pouvoir construire des courbes d&rsquo;√©volution capable de d√©montrer la <strong>saisonnalit√©</strong>, nous avons impl√©ment√© des courbes d&rsquo;√©volution des variables quantitatives (par exemple la temp√©rature ressentie). Finalement, nous avons la conception qui suit;</p>

<img src="/img/metar_conception_1.png"  class="center"  />


<h2 id="deuxi√®me-question">Deuxi√®me question</h2>
<blockquote>
<p>√Ä un instant donn√© je veux pouvoir obtenir une carte me repr√©sentant n‚Äôimporte quel indicateur.</p>
</blockquote>
<p>Contrairement √† la conception pr√©c√©dente, dans cette requ√™te, l&rsquo;hi√©rarchie temporelle emporte par rapport √† l&rsquo;hi√©rarchie g√©ographique. De plus, contrairement √† l&rsquo;historique, la requ√™te porte sur un instant sp√©cifique et non pas une p√©riode.</p>
<p>En terme de cl√© de partition, nous avons choisi d&rsquo;utiliser un couple $(ann√©e, mois)$ afin de constituer un nombre raisonnable de partitions th√©oriquement homog√®nes (Avec le jeu de donn√©es en question, on aurait $nb_{annee} \times nb_{mois} = 10 \times 12 = 120$ partitions contenant potentiellement de $\underbrace{545791}_\textrm{nb enregis.} / 120 = 4500 $ enregistrements par partition). Pour composer la surclef, on ajoute les attributs heure, minute, seconde (afin de compl√©ter l&rsquo;hi√©rarchie temporelle), la longitude, la latitude et l&rsquo;altitude. L&rsquo;ordre des clefs de tri permet de requ√™ter la base sans conna√Ætre la position exacte de l&rsquo;observation. Finalement, ceci aboutit √† la mod√©lisation qui suit:</p>

<img src="/img/metar_conception_2.png"  class="center"  />


<p>En terme de repr√©sentation, nous avons choisi de superposer nos latitudes et nos longitudes sur une carte interactive de la Finlande construite par le module folium. De plus, puisque la question n&rsquo;impose aucune contrainte d&rsquo;interpr√©tation, les donn√©es en question sont interpr√©t√©es sous l&rsquo;angle d&rsquo;analyse des temp√©ratures ressenties, c&rsquo;est-√†-dire que pour un instant donn√©, on veut savoir quelle est la plage de temp√©rature mesur√©e √† une station donn√©e. Sur la carte, les temp√©ratures seront repr√©sent√©es avec des couleurs diff√©rentes et les autres indicateurs dans le popup correspondant.</p>
<h2 id="troisi√®me-question">Troisi√®me Question</h2>
<blockquote>
<p>Pour une p√©riode de temps donneÃÅe, je veux pouvoir clusteriser l‚Äôespace, et repr√©senter cette clusterisation.</p>
</blockquote>
<p>Similairement √† la question 2, l&rsquo;hi√©rarchie temporelle remporte sur l&rsquo;hi√©rarchie g√©ographique. Afin de faciliter l&rsquo;interrogation des donn√©es requises, nous avons concat√©n√© les attributs ann√©e, mois et jour (afin de constituer un entier sous format YYYYmmdd) pour former une cl√© de partition. A ceci, s&rsquo;ajoute les clefs de tri heure et minute qui facilite le requ√™tage par rapport √† une p√©riode sp√©cifique d&rsquo;une journ√©e. Ceci a donc aboutit √† la conception suivante:</p>

<img src="/img/metar_conception_3.png"  class="center"  />


<p>Afin de clusteriser les donn√©es provenant de diff√©rentes stations, nous avons choisi d&rsquo;utiliser l&rsquo;algorithme des k-means, ce dernier prenant en param√®tre un ensemble de colonnes du jeu de donn√©e et en hyper-param√®tre une valeur k enti√®re. Nous avons choisi de l&rsquo;impl√©menter sur qu&rsquo;une seule dimension d&rsquo;une part par d√©faut de temps, d&rsquo;autre part √† cause du fait que chaque dimension est ind√©pendante.</p>
<p>L&rsquo;algorithme pr√©c√©dente appliqu√©e sur la temp√©rature ambiante entre 01/06/2010 et 01/06/2011 permet de construire le diagramme de Vorono√Ø suivant:</p>

<img src="/img/metar_voronoi.png"  class="center"  />


<p>Nous avons choisi de clusteriser avec $k=3$ et $k=4$ pour comparer les r√©sultats. Pour cas $k=3$, on peut distinguer trois groupes qui sont situ√©s au sud, au centre et au nord. C&rsquo;est logique comme on utilise le temp√©rature comme le pr√©dicteur, et il d√©pend fortement de latitude quand le longitude est fix√©. Et pour cas $k=4$, on peut voir il a s√©par√© un des trois groupes pr√©c√©dant, et le critique g√©n√©ral pour distinguer les clusters est encore le latitude. Pour avoir une vue plus intuitive des clusters, nous les avons projet√©s sur une carte, les points avec les m√™mes couleurs repr√©sentent un cluster.</p>

<img src="/img/metar_folium.png"  class="center"  />


<h2 id="analyse-des-performances">Analyse des performances</h2>
<p>Afin d&rsquo;√©tudier l&rsquo;efficacit√© de notre conception, nous avons effectu√© une benchmark avec l&rsquo;ensemble du jeu de donn√©e charg√© sur les trois serveurs qui nous sont attribu√©s. Les indicateurs pr√©sent√©s sont obtenus gr√¢ce √† la commande:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">nodetool tablestats keyspace_name
</code></pre></div><table>
<thead>
<tr>
<th align="center">SCTS Percentile</th>
<th align="center">Q1</th>
<th align="center">Q2</th>
<th align="center">Q3</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">SSTable Count</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">Space used</td>
<td align="center">7.67e6</td>
<td align="center">7.51e6</td>
<td align="center">3.55e6</td>
</tr>
<tr>
<td align="center">SSTable  Compression Ration</td>
<td align="center">0.318</td>
<td align="center">0.377</td>
<td align="center">0.451</td>
</tr>
<tr>
<td align="center">Number of estimated partitions</td>
<td align="center">76</td>
<td align="center">2317</td>
<td align="center">2418</td>
</tr>
<tr>
<td align="center">Compacted partition  mean bytes</td>
<td align="center">1e6</td>
<td align="center">1.3e4</td>
<td align="center">5e3</td>
</tr>
</tbody>
</table>
<hr>
<table>
<thead>
<tr>
<th align="center">DTCS Percentile</th>
<th align="center">Q1</th>
<th align="center">Q2</th>
<th align="center">Q3</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">SSTable Count</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">Space used</td>
<td align="center">3.36e7</td>
<td align="center">3.61e7</td>
<td align="center">6.45e5</td>
</tr>
<tr>
<td align="center">SSTable Compression Ration</td>
<td align="center">0.317</td>
<td align="center">0.377</td>
<td align="center">0.496</td>
</tr>
<tr>
<td align="center">Number of estimated partitions</td>
<td align="center">98</td>
<td align="center">2379</td>
<td align="center">2483</td>
</tr>
<tr>
<td align="center">Compacted partition mean bytes</td>
<td align="center">1.21e6</td>
<td align="center">4.35e4</td>
<td align="center">5e3</td>
</tr>
</tbody>
</table>
<hr>
<table>
<thead>
<tr>
<th align="center">TWCS Percentile</th>
<th align="center">Q1</th>
<th align="center">Q2</th>
<th align="center">Q3</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">SSTable Count</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">Space used</td>
<td align="center">3.38e7</td>
<td align="center">3.61e7</td>
<td align="center">5.37e6</td>
</tr>
<tr>
<td align="center">SSTable Compression Ration</td>
<td align="center">0.32</td>
<td align="center">0.378</td>
<td align="center">0.48</td>
</tr>
<tr>
<td align="center">Number of estimated partitions</td>
<td align="center">98</td>
<td align="center">2379</td>
<td align="center">2484</td>
</tr>
<tr>
<td align="center">Compacted partition mean bytes</td>
<td align="center">6.78e5</td>
<td align="center">4.3e4</td>
<td align="center">5e3</td>
</tr>
</tbody>
</table>
<p>Le crit√®re du <strong>nombre de SSTable</strong> correspond au nombres magasins cl√© valeur n√©cessaires pour indexer les contenus de la table en question. En r√©alit√©, √† chaque √©criture, Cassandra √©crit la donn√©e dans une table memtable et un commit log, ces derniers √©tant mis en m√©moire physique (dans une SSTable) une fois un threshold d√©pass√©. Donc plus le nombre de SSTable est important, plus la possibilit√© qu&rsquo;une donn√©e cherch√©e soit r√©partie sur plusieurs SSTable, ce qui augmente la latence des lectures r√©duisant ainsi la performance. Nous observons donc que la latence d&rsquo;√©criture ne fera pas l&rsquo;objet de notre optimisation.</p>
<p>Le deuxi√®me crit√®re de performance s&rsquo;agit du <strong>ratio de compaction des SSTables</strong> correspond √† un indicateur sur l&rsquo;efficacit√© du stockage en m√©moire. La compaction correspond √† un rassemblement  On observe donc un goulot d&rsquo;√©tranglement du syst√®me au niveau de la m√©moire puisque ce facteur est relativement faible (environ 0.3 - 0.4). Malgr√© le fait que nos donn√©es sont &ldquo;sparse&rdquo;, la strat√©gie de compaction par d√©faut SizeTieredCompactionStrategy (ne s&rsquo;applique que lorsqu&rsquo;un threshold du nombre de SSTable est d√©pass√©) n&rsquo;est donc pas adapt√©e. Puisque nos donn√©es pr√©sentent √† chaque fois une dimension temporelle, les strat√©gies DateTieredCompactionStrategy (DTCS) et TimeWindowCompactionStrategy (TWCS) sont donc plus adapt√©es (notamment avec la question 3).</p>
<p>Mis √† part ces options, notre mod√©lisation peut aussi √™tre remise en question gr√¢ce aux donn√©es sur le <strong>nombre de partitions estim√©</strong> ainsi que la <strong>distribution des donn√©es par partition</strong> avec la commande :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">nodetool cfhistograms keyspace_name.table_name
</code></pre></div><table>
<thead>
<tr>
<th align="center">Percentile</th>
<th align="center">Q1 Cell Count</th>
<th align="center">Q2 Cell Count</th>
<th align="center">Q3 Cell Count</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">.5</td>
<td align="center">182785</td>
<td align="center">446</td>
<td align="center">642</td>
</tr>
<tr>
<td align="center">.75</td>
<td align="center">182785</td>
<td align="center">446</td>
<td align="center">770</td>
</tr>
<tr>
<td align="center">.95</td>
<td align="center">263210</td>
<td align="center">9887</td>
<td align="center">924</td>
</tr>
<tr>
<td align="center">.98</td>
<td align="center">315852</td>
<td align="center">11864</td>
<td align="center">1109</td>
</tr>
<tr>
<td align="center">.99</td>
<td align="center">315852</td>
<td align="center">14237</td>
<td align="center">1109</td>
</tr>
<tr>
<td align="center">min</td>
<td align="center">35426</td>
<td align="center">104</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">max</td>
<td align="center">315852</td>
<td align="center">17084</td>
<td align="center">1109</td>
</tr>
</tbody>
</table>
<p>Il est important de contextualiser le fait que notre jeu de donn√©e est restreint g√©ographiquement et la mod√©lisation propos√©e est destin√©e √† √™tre scalable √† ce niveau. En terme de distribution, la distribution est relativement homog√®ne puisque les quartiles sont proches. Le nombre de partitions faibles observ√©es √† la question 1 et sa distribution confirme donc la validit√© de notre conception.</p>
<p>De m√™me, les mod√©lisations r√©pondant aux autres questions engendrent la cr√©ation de 1000 fois plus de partition. Cette diff√©rence, malgr√© √©norme peut √™tre expliqu√© gr√¢ce √† l&rsquo;hi√©rarchie temporelle construite aboutissant √† environ 13 partitions par mois. Contrairement √† la premi√®re conception, celles-ci pr√©sentent une distribution fortement h√©t√©rog√®ne qui peut, en partie, √™tre expliqu√©e par la distribution des dates des mesures m√©t√©orologiques. Tout de m√™me, il faudrait remettre en question ces mod√©lisations.</p>
<h2 id="conclusion">Conclusion</h2>
<p>En conclusion, √† travers ce projet, nous avons propos√© un ensemble de mod√©lisations adaptables avec une interface permettant de les exploiter. Nous avons √©t√© confront√© √† des probl√©matiques de gestion et d&rsquo;exploitation des donn√©es r√©elles, imparfaites, mal format√©es, h√©t√©rog√®nes et parfois inexploitables.</p>
<p>N√©anmoins, il reste beaucoup de points √† travailler pour que ce dernier peut r√©pondre √† des usages en environnement de production. En terme d&rsquo;am√©liorations possibles, nous pouvons optimiser les calculs (moyenne, m√©diane, etc&hellip;) et impl√©menter des algorithmes de Statistical Learning plus approfondie en le distribuant avec Spark. De m√™me par d√©faut de temps, nous n&rsquo;avons pas pu construire des outils de visualisation plus intuitive pour exploiter les donn√©es, ni optimiser le d√©ploiement avec des param√®tres plus avanc√©es (comme par exemple la classe de Compression, la gestion des Tombstones, etc&hellip;).</p>

            </div>
        </article>
        <h2 id="end"></h2>
        <hr />

        <div class="post-info">
  				<p>
  					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://ichbinfrog.github.io/tags/datawarehouse">datawarehouse</a></span><span class="tag"><a href="https://ichbinfrog.github.io/tags/cassandra">cassandra</a></span>
  				</p>
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2022</span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span><a href="https://themes.gohugo.io/hugo-theme-hello-friend-ng/">hello-friend-ng</a> Theme for <a href="http://gohugo.io">Hugo</a> by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" integrity="sha512-3HFukJLJggt3&#43;W2ilNASCu6xibW86pdSMJ6&#43;on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script>



    </body>
</html>
