<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="Ce travail a √©t√© fait avec Ga√´tan BLOND, Alix CANDUSSO, Marc DAMIE dans le cadre de l&amp;rsquo;UV LO21.
 Tout l&amp;rsquo;enjeu de ce document sera de pr√©senter les choix effectu√©s en appuyant toujours sur ce qui rend nos choix p√©reins dans le sens o√π ils produiront un code maintenable, modulaire et simple √† faire √©voluer.
Nous ne rentrons que rarement dans des d√©tails techniques et seulement si le c√¥t√© technique traduit un choix d&amp;rsquo;impl√©mentation significatif." />
<meta name="keywords" content=", OOP, C&#43;&#43;" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://ichbinfrog.github.io/university/tradingsim/" />
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$']],
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            TeX: {
                equationNumbers: { autoNumber: "AMS" },
                extensions: ["AMSmath.js", "AMSsymbols.js"]
            }
        }
    });
    MathJax.Hub.Queue(function () {
        
        
        
        var all = MathJax.Hub.getAllJax(), i;
        for (i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });

    MathJax.Hub.Config({
        
        TeX: { equationNumbers: { autoNumber: "AMS" } }
    });
</script>


    <title>
        
            üá´üá∑ Trading simulator conception :: Hoang Quoc Trung 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.min.cbd9ce6c3a26d6c4a5eb4b8834c18d83518654bd8bac1fc8160486f336181c9a.css">


    
        <link rel="stylesheet" type="text/css" href="/css/post.css">
    





<meta itemprop="name" content="üá´üá∑ Trading simulator conception">
<meta itemprop="description" content="Ce travail a √©t√© fait avec Ga√´tan BLOND, Alix CANDUSSO, Marc DAMIE dans le cadre de l&rsquo;UV LO21.
 Tout l&rsquo;enjeu de ce document sera de pr√©senter les choix effectu√©s en appuyant toujours sur ce qui rend nos choix p√©reins dans le sens o√π ils produiront un code maintenable, modulaire et simple √† faire √©voluer.
Nous ne rentrons que rarement dans des d√©tails techniques et seulement si le c√¥t√© technique traduit un choix d&rsquo;impl√©mentation significatif.">
<meta itemprop="datePublished" content="2018-12-21T15:37:55&#43;02:00" />
<meta itemprop="dateModified" content="2018-12-21T15:37:55&#43;02:00" />
<meta itemprop="wordCount" content="5444">
<meta itemprop="image" content="https://ichbinfrog.github.io/"/>



<meta itemprop="keywords" content="OOP,C&#43;&#43;," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://ichbinfrog.github.io/"/>

<meta name="twitter:title" content="üá´üá∑ Trading simulator conception"/>
<meta name="twitter:description" content="Ce travail a √©t√© fait avec Ga√´tan BLOND, Alix CANDUSSO, Marc DAMIE dans le cadre de l&rsquo;UV LO21.
 Tout l&rsquo;enjeu de ce document sera de pr√©senter les choix effectu√©s en appuyant toujours sur ce qui rend nos choix p√©reins dans le sens o√π ils produiront un code maintenable, modulaire et simple √† faire √©voluer.
Nous ne rentrons que rarement dans des d√©tails techniques et seulement si le c√¥t√© technique traduit un choix d&rsquo;impl√©mentation significatif."/>



    <meta property="og:title" content="üá´üá∑ Trading simulator conception" />
<meta property="og:description" content="Ce travail a √©t√© fait avec Ga√´tan BLOND, Alix CANDUSSO, Marc DAMIE dans le cadre de l&rsquo;UV LO21.
 Tout l&rsquo;enjeu de ce document sera de pr√©senter les choix effectu√©s en appuyant toujours sur ce qui rend nos choix p√©reins dans le sens o√π ils produiront un code maintenable, modulaire et simple √† faire √©voluer.
Nous ne rentrons que rarement dans des d√©tails techniques et seulement si le c√¥t√© technique traduit un choix d&rsquo;impl√©mentation significatif." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ichbinfrog.github.io/university/tradingsim/" />
<meta property="og:image" content="https://ichbinfrog.github.io/"/>
<meta property="article:published_time" content="2018-12-21T15:37:55+02:00" />
<meta property="article:modified_time" content="2018-12-21T15:37:55+02:00" /><meta property="og:site_name" content="Hoang Quoc Trung" />






    <meta property="article:published_time" content="2018-12-21 15:37:55 &#43;0200 &#43;0200" />








    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">ichbinfrog</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://ichbinfrog.github.io/projects">0_projects</a></li><li><a href="https://ichbinfrog.github.io/internships">1_internships</a></li><li><a href="https://ichbinfrog.github.io/university">2_uni_works</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title" id="top"><a href="https://ichbinfrog.github.io/university/tradingsim/">üá´üá∑ Trading simulator conception</a></h2>
            <aside id="toc"><style>
.toc {
    position: fixed;
    top: 50%;
    left: 2%;
    width: 20%;
    transform: translateY(-50%);
    border-radius: 5px;
    padding-bottom: 1rem;
}

.toc a {
    text-decoration: none;
    color: gray;
}

.toc a:hover {
    opacity: 0.5;
}

.toc ul {
    list-style: ">  ";
}

.toc-title {
    text-decoration: underline;
}
</style>

<div class="toc">
    <div class="toc-title">Table of Contents</div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#le-contexte">Le contexte</a>
      <ul>
        <li><a href="#pour-lutilisateur">Pour l&rsquo;utilisateur</a></li>
        <li><a href="#pour-le-d√©veloppeur">Pour le d√©veloppeur</a></li>
      </ul>
    </li>
    <li><a href="#architecture-choix-et-justifications">Architecture: choix et justifications</a>
      <ul>
        <li><a href="#concepts-g√©n√©raux">Concepts g√©n√©raux</a></li>
        <li><a href="#diagramme-de-larchitecture-√†-laide-de-paquets">Diagramme de l&rsquo;architecture √† l&rsquo;aide de paquets</a></li>
        <li><a href="#les-managers">Les managers</a></li>
        <li><a href="#importation-de-l√©volution-dune-cotation">Importation de l&rsquo;√©volution d&rsquo;une cotation</a></li>
        <li><a href="#interface">Interface</a></li>
        <li><a href="#strat√©gie">Strat√©gie</a></li>
        <li><a href="#analyse-des-formes">Analyse des formes</a></li>
        <li><a href="#gestion-des-exceptions">Gestion des exceptions</a></li>
      </ul>
    </li>
    <li><a href="#le-planning-de-lavancement-du-projet">Le planning de l&rsquo;avancement du projet</a>
      <ul>
        <li><a href="#premi√®re-tentative-de-conception">Premi√®re tentative de conception</a></li>
        <li><a href="#relecture-et-correction-du-premier-mod√®le">Relecture et correction du premier mod√®le</a></li>
        <li><a href="#impl√©mentation">Impl√©mentation</a></li>
        <li><a href="#d√©bogage-et-livrables">D√©bogage et livrables</a></li>
      </ul>
    </li>
    <li><a href="#fonctionnalit√©s-√†-compl√©ter">Fonctionnalit√©s √† compl√©ter</a>
      <ul>
        <li><a href="#strat√©gie-automatique">Strat√©gie automatique</a></li>
        <li><a href="#standardisation-de-lexportation-de-strat√©gie">Standardisation de l&rsquo;exportation de strat√©gie</a></li>
        <li><a href="#mode-pas-√†-pas">Mode pas √† pas</a></li>
        <li><a href="#strat√©gie-multi-cotation">Strat√©gie multi-cotation</a></li>
      </ul>
    </li>
    <li><a href="#interface-et-personnalisation">Interface et personnalisation</a>
      <ul>
        <li><a href="#ergonomie">Ergonomie</a></li>
        <li><a href="#personnalisation-pouss√©e">Personnalisation pouss√©e</a></li>
      </ul>
    </li>
  </ul>
</nav>
    <ul>
    <li><a href="#top">Top</a></li>
    <li><a href="#end">End</a></li>
    </ul>
</div></aside>

            

            <div class="post-content">
                <blockquote>
<p>Ce travail a √©t√© fait avec Ga√´tan BLOND, Alix CANDUSSO, Marc DAMIE dans le cadre de l&rsquo;UV LO21.</p>
</blockquote>
<p>Tout l&rsquo;enjeu de ce document sera de pr√©senter les choix effectu√©s en appuyant toujours sur ce qui rend nos choix p√©reins dans le sens o√π ils produiront un code maintenable, modulaire et simple √† faire √©voluer.</p>
<p>Nous ne rentrons que rarement dans des d√©tails techniques et seulement si le c√¥t√© technique traduit un choix d&rsquo;impl√©mentation significatif. Le c√¥t√© technique et programmation sera r√©serv√© √† la documentation jointe √† ce rapport. Nous parlerons donc de conception plut√¥t que de programmation. Ainsi, nous √©viterons au maximum de faire appara√Ætre du code C++ dans ce document.</p>
<p>Afin de ne jamais nous perdre dans des explications trop longues, nous privil√©gierons autant que possible le recours √† des UML (toujours comment√©s √©videmment).</p>
<h2 id="le-contexte">Le contexte</h2>
<h3 id="pour-lutilisateur">Pour l&rsquo;utilisateur</h3>
<p>Le but du projet √©tait de r√©aliser un logiciel permettant la visualisation de cours et la simulation de sessions de trading. L&rsquo;utilisateur pourra importer l&rsquo;√©volution d&rsquo;une ou plusieurs cotations dans le logiciel. L&rsquo;√©volution d&rsquo;un cours devra √™tre stock√©e sous la forme d&rsquo;un CSV. Bien que le programme ait un porte-monnaie virtuel pouvant comporter plus de deux monnaies et qu&rsquo;il peut retenir l&rsquo;√©volution de diff√©rentes cotations, la simulation ne pourra porter que sur une cotation √† la fois. Cependant, ces fonctionnalit√©s d√©j√† impl√©ment√©es pourront √™tre adapt√©es. Par exemple, dans le futur, la strat√©gie de d√©cision pourrait prendre en compte plusieurs cours en parall√®le. Un autre objectif de ce projet √©tait de pouvoir prendre quelques notes d&rsquo;une strat√©gie et de pouvoir faire un import/export de celle-ci avec toutes les donn√©es qui y sont li√©es.</p>
<p>Notons que lors de l&rsquo;importation de CSV, l&rsquo;utilisateur sera invit√© √† d√©finir quelques param√®tres de simulation: le montant initialement poss√©d√© de chaque devise concern√©e, la taxe du broker et √©videmment le code des deux devises.</p>
<p>A tout moment, l&rsquo;utilisateur pourra passer de la visualisation du graphe de bougies d&rsquo;une cotation √† une autre.</p>
<p>L&rsquo;utilisateur pourra visualiser √† tout moment: le montant qu&rsquo;il poss√®de de chaque monnaie, les informations (Open, Close, High, Low, Volume, Pattern et indicateurs) d&rsquo;une bougie sur laquelle il clique, un graphe des bougies de la cotation courante et le graphe de l&rsquo;√©volution du volume de cette cotation. Sur ces deux graphiques, il sera possible de zommer et de d√©zoomer sachant que l&rsquo;√©volution peut parfois s&rsquo;√©tendre sur plusieurs ann√©es.</p>
<p>L&rsquo;utilisateur pourra √©galement choisir une bougie et lancer une simulation manuelle ou automatique √† partir de cette bougie. Il pourra tout √† fait annuler les derni√®res transactions qui ne lui conviennent pas.</p>
<p>Un tableau des derni√®res transactions est √©galement pr√©sent pour faire un bilan financier des derniers √©v√©nements.</p>
<p>Sachant que nous ne sommes pas des experts de la finance, nous avons essay√© de fournir des visualisations pr√©cises et compl√®tes avec une disponibilit√© du maximum d&rsquo;informations pour l&rsquo;utilisateur afin qu&rsquo;il puisse faire ses propres choix de strat√©gies potentiellement bien meilleur que ceux de notre &ldquo;IA&rdquo;.</p>
<h3 id="pour-le-d√©veloppeur">Pour le d√©veloppeur</h3>
<p>Nous n&rsquo;avons pas eu le temps d&rsquo;impl√©menter certaines fonctionnalit√©s √† leur plein potentiel mais nous avons tout au long du code essay√© d&rsquo;avoir quelques principes de d√©veloppement (co√ªteux temporellement) afin de s&rsquo;assurer que le code puisse √™tre repris et compl√©ter par un d√©veloppeur tiers:</p>
<ul>
<li>Modularit√©: nos fonctions doivent quasiment toutes √™tre d√©velopp√©es dans une id√©e modulaire. Les fonctions doivent √™tre aussi ind√©pendantes que possibles du reste du code. Il faudrait pratiquement que nos fonctions soient utilisables directement dans le code d&rsquo;un autre groupe.</li>
<li>Les fonctions doivent r√©pondre √† des besoins conceptuels et non pas √† un usage direct. Une fonction doit r√©pondre de mani√®re la plus g√©n√©rale possible aux besoins m√™me si toutes ses potentialit√©s ne sont pas exploit√©es dans le projet dans son √©tat actuel. Ainsi, le travail futur d&rsquo;ajout de fonctionnalit√©s sera simplifi√© car il n&rsquo;y aura qu&rsquo;√† ajouter des fonctions; les fonctions existantes √©tant pouss√©es √† leur plein potentiel elle n&rsquo;auront besoin d&rsquo;aucune modification. Le fait d&rsquo;√©viter de modifier des fonctions existantes est central pour l&rsquo;am√©lioration continue car cela √©vitera au programmeur de devoir se plonger dans l&rsquo;esprit de son pr√©d√©cesseur en essayant de comprendre chaque d√©tail d&rsquo;un code qu&rsquo;il n&rsquo;a pas produit.</li>
<li>Utilisation maximale des types propres √† Qt pour des questions d&rsquo;optimisation et de fonctionnalit√©s suppl√©mentaires que poss√®dent ces types (en rempla√ßant par exemple <code>std::string</code> par <code>QString</code>).</li>
<li>Nomenclature des attributs et des m√©thodes:_nom pour les attributs de la classe, getValue (camelCase) pour les m√©thodes et ClassExample(d√©but majuscule et camelCase) pour les classes.</li>
<li>Pas d&rsquo;allocation dynamique brute : on utilisera des <code>unique_ptr</code> et <code>shared_ptr</code> ce qui √©vitera des fuites de donn√©es lors d&rsquo;utilisations modulaires de nos fonctions.</li>
<li>Se documenter au maximum pour avoir recours autant que possible √† des design patterns. Dans ce rapport, nous ne mettrons pas en avant l&rsquo;utilisation des design patterns les plus simples tel que l&rsquo;it√©rateur (souvent int√©gr√© nativement dans les types qu&rsquo;on utilisera).</li>
<li>Privil√©gier de la qualit√© √† la quantit√©. Nous avons favoris√© le d√©veloppement de fonctionnalit√©s propres et d√©bugu√©es plut√¥t que de produire le maximum de fonctionnalit√©s mais toutes avec des probl√®mes de fonctionnement et de conception. Cela est n√©cessaire dans une d√©marche de d√©veloppement continu d&rsquo;un logiciel car il est bien plus difficile de corriger un code d√©faillant que de compl√©ter des codes propres √† l&rsquo;aide de nouvelles fonctions.</li>
</ul>
<hr>
<h2 id="architecture-choix-et-justifications">Architecture: choix et justifications</h2>
<p>Au fur et √† mesure de la description de notre architecture, nous justifierons les choix un √† un. Nous consid√©rerons que cela permettra d&rsquo;envisager plus facilement notre architecture que si nous s√©parions en deux axes description et justification.</p>
<p>Afin d&rsquo;illustrer nos diff√©rents choix de conception, nous produirons des diagrammes. Nous avons fait le choix de ne jamais produire un diagramme de l&rsquo;ensemble du logiciel. Nous effectuerons syst√©matiquement des diagrammes des √©l√©ments qui concernent la fonctionnalit√© dont nous parlerons. Au d√©but du projet, nous avions produit un UML de l&rsquo;ensemble mais nous devons avou√© que cela prend beaucoup de temps pour une lisibilit√© plus que limit√©e.</p>
<h3 id="concepts-g√©n√©raux">Concepts g√©n√©raux</h3>
<p>Pour ce projet, nous avons d√©cid√© de centrer notre conception sur la visualisation plut√¥t que la simulation/strat√©gie. Ainsi, le bloc central de notre architecture sera le <code>ChandelierGraphManager</code>.</p>
<h3 id="diagramme-de-larchitecture-√†-laide-de-paquets">Diagramme de l&rsquo;architecture √† l&rsquo;aide de paquets</h3>
<p>Afin d&rsquo;obtenir une premi√®re vision d&rsquo;ensemble de notre architecture, nous vous proposons le diagramme suivant qui conserve simplement les classes majeurs et regroupe les classes mineures dans des paquets.</p>

<img src="/img/trading_global.png"  class="center"  />


<p>Il vous permettra d&rsquo;avoir une premi√®re vision des blocs de notre architecture ainsi que des interactions qu&rsquo;il existe entre ces blocs.</p>
<h3 id="les-managers">Les managers</h3>
<p>Les managers seront des points tr√®s importants de notre syst√®me. Ce seront tous des singleton. Nous allons donc d√©tailler un peu plus l&rsquo;usage et l&rsquo;importance de chaque manager dans notre architecture.</p>
<h4 id="devisemanager">DeviseManager</h4>
<p>Le DeviseManager aura deux r√¥les: lister les devises existantes et stock√© le montant poss√©d√© de chaque devise (on fera cela √† l&rsquo;aide d&rsquo;un <code>map</code>). Avant d&rsquo;entrer dans plus d&rsquo;explications, jetons un oeil au diagramme suivant.</p>

<img src="/img/trading_devise.png"  class="center"  />


<p>Un choix particulier que nous avons fait est de dire qu&rsquo;une Devise a forc√©ment un porte-monnaie virtuel. Dans le monde r√©el, ce choix n&rsquo;aurait aucun sens mais il faut voir notre logiciel comme un monde r√©duit. Ainsi, dans notre logiciel, il n&rsquo;y a aucun int√©r√™t de faire exister une monnaie sans compte en banque qui lui est li√©. Dans un logiciel de simulation, une devise sans porte-monnaie est une monnaie dont l&rsquo;existence peut √™tre d√©crite comme inutile voire absurde.</p>
<p>Dans la pratique, la devise et le montant poss√©d√© seront inclus dans le <code>DeviseManager</code> qui poss√®de l&rsquo;attribut priv√© suivant:
<code>std::map&lt;std::shared_ptr&lt;Devise&gt;, qreal&gt; m_devises;</code>. Cette structure respecte tout √† fait la repr√©sentation faite ci-dessus tout en condensant les classes. On gagn√© ainsi en clart√© et en ligne de codes produites. Le fait de passer par un <code>map</code> nous √©vitera √©galement quelques bugs et autres probl√®mes lors de nos tests.</p>
<p>Cette solution √©l√©gante sera √©galement tr√®s facilement comprise ET utilisable par un d√©veloppeur tiers.</p>
<p>Notons que nous avons √©videmment coder toutes les fonctions n√©cessaires √† l&rsquo;encapsulation m√™me si elles n&rsquo;apparaissent pas sur le diagramme.</p>
<p>Enfin, ajoutons que nous pouvons stocker plus de deux devises √† la fois car notre syst√®me laisse la possibilit√© de charger plusieurs cotations √† la fois et donc il peut exister bien plus de deux devises dans le syst√®me. Ainsi, une devise pourra √™tre √† la fois de base dans une cotation et de contrepartie dans une autre. Cela laisse de grandes possibilit√©s en ce qui concerne le d√©veloppement de nouvelles fonctionnalit√©s.</p>
<h4 id="cotationmanager">CotationManager</h4>
<p>Le <code>CotationManager</code> a √©t√© r√©alis√© avec une id√©e tr√®s proche de celle du DeviseManager. En effet, les classes qu&rsquo;il devra g√©rer seront stock√©es dans le manager mais cette fois-ci avec un <code>vector</code>: <code>std::vector&lt;std::unique_ptr&lt;Cotation&gt;&gt; m_cotations</code>. Voyons son UML:</p>

<img src="/img/trading_cotation.png"  class="center"  />


<p>L&rsquo;agr√©gation dans notre sch√©ma est tr√®s importante. Nous ne cr√©erons que les cotations existantes dans la simulation. Il peut exister deux devises dont la cotation de l&rsquo;un par rapport √† l&rsquo;autre n&rsquo;existe pas.</p>
<p>Le <code>CotationManager</code> poss√®de √©norm√©ment de fonctions permettant de faire de recherches par rapport √† une des devises ou les deux. Ces fonctions sont n√©cessaires car elles seront √©norm√©ment utilis√©es par d&rsquo;autres blocs de notre architecture qui feront souvent appel √† ce manager. Ajoutons √©galement que cr√©er un maximum de fonctions de recherche √©vitera √† un futur d√©veloppeur de devoir compl√©ter cette classe.</p>
<p>Enfin, soulignons la pr√©sence d&rsquo;une m√©thode permettant de r√©cup√©rer la cotation courante. Cette cotation est celle affich√©e √† l&rsquo;√©cran. Sachant que l&rsquo;utilisateur pourra charger plusieurs cotations et que le logiciel en aura une m√©moire, √† tout moment l&rsquo;utilisateur pour passer d&rsquo;une cotation √† une autre. Ce sera le travail du CotationManager de retenir quelle est la cotation courante parmi toutes les cotations qu&rsquo;il g√®re</p>
<h4 id="chandeliergraphmanager">ChandelierGraphManager</h4>
<p>Sachant que notre architecture est enti√®rement centr√©e sur la visualisation, il semble √©vident que ce manager soit central. Cet √©l√©ment se chargera de stocker les bougies et le cours li√© √† chacune de celles-ci. Pour chaque cotation existante, des bougies tri√©es dans l&rsquo;ordre chronologique seront stock√©es. Les autres managers et l&rsquo;interface iront toujours chercher les cours dont ils ont besoin dans ce manager.</p>
<p>Notons que ce manager stocke tout en candleStickSet. Lorsque d&rsquo;autres objets int√©ragiront avec lui, ils auront tr√®s rarement besoin de candleSitck. Ainsi, nous avons produit des fonctions permettant d&rsquo;interfacer le ChandelierGraphManager avec d&rsquo;autres classes. Pour donner un exemple concret, la m√©thode <code>getCoursVector</code> permet d&rsquo;extrait un vecteur de cours d&rsquo;un ensemble de bougies. Cette fonction est notamment utilis√©e par le <code>TransactionManager</code> et les indicateurs lorsqu&rsquo;ils souhaitent r√©cup√©rer les cours li√©s √† une cotation.</p>
<p>Ce sont ces fonctions d&rsquo;interfa√ßage qui permettent la maintenabilit√© du code. Nous ou de futurs d√©veloppeurs n&rsquo;auront pas √† √™tre contraint par les attributs du singleton <code>ChandelierGraphManager</code> car il existe d√©j√† des fonctions qui permettent d&rsquo;extraire les donn√©es utiles de ce manager dans diff√©rentes structures de donn√©es g√©n√©riques.</p>
<h4 id="transactionmanager">TransactionManager</h4>
<p>Ce manager a √©galement une importance particuli√®re car il sera le support de la strat√©gie qu&rsquo;elle soit automatique ou manuelle. Toute transaction effectu√©e sera cr√©√©e et stock√©e par ce manager; que la transaction ait √©t√© demand√©e par l&rsquo;utilisateur ou par notre &ldquo;IA&rdquo; d√©cisionnelle.</p>

<img src="/img/trading_transaction.png"  class="center"  />


<p>Faisons quelques remarques √† propos de choix particuliers qui ont pu √™tre faits. D&rsquo;une part, on remarque que la taxe du broker est retenue par le <code>TransactionManager</code>. Cet objet est en quelque sorte le broker donc il semble tout √† fait logique qu&rsquo;il contienne cette valeur. D&rsquo;autre part, on stocke les cours de la cotation actuelle dans le manager. Ce choix cr√©e une redondance car l&rsquo;information de tous les cours est d√©j√† contenu dans le <code>ChandlierGraphManager</code>. Ce stockage redondant permet d&rsquo;√©viter de retransformer le <code>QCandleStickSet</code> en <code>vector&lt;Cours&gt;</code> √† chaque manipulation particuli√®re de la part du <code>TransactionManager</code>. La derni√®re transaction nous servira de curseur pour d√©terminer la prochaine date √† traiter.</p>
<p>√âvidemment, √† chaque changement de cotation courante, il est n√©cessaire de r√©extraire un <code>vector&lt;Cours&gt;</code> donc il faudra faire bien attention √† cela lors de d√©veloppements futurs.</p>
<p>Ce singleton permettrait √©galement de d&rsquo;impl√©menter <strong>le mode pas √† pas</strong> de la mani√®re suivante (nous n&rsquo;avons malheureusement pas eu le temps de l&rsquo;impl√©menter):</p>
<ul>
<li>Lors du d√©but de la simulation, le manager importe un vecteur ne contenant que les cours d√©j√† pass√©s par rapport √† sa date de d√©part</li>
<li>A chaque nouvelle d√©cision, le <code>TransactionManager</code> importe la bougie suivante.</li>
<li>En mode pas √† pas, la visualisation se fera en restreignant l&rsquo;affichage √† la derni√®re date pr√©sente dans le TransactionManager.</li>
</ul>
<p>Avec cette solution, nous n&rsquo;aurons pas besoin de changer les strat√©gies car elles continueront de se baser sur le vecteur contenu dans <code>TransactionManager</code>. Il suffit juste d&rsquo;ajouter des fonctions et d&rsquo;en modifier quasiment aucune.</p>
<p>Ce manager stocke √©galement un <code>stack&lt;shared_ptr&lt;Transaction&gt;&gt;</code>. Le choix de la structure <code>stack&lt;T&gt;</code> est tr√®s important car il facilitera l&rsquo;annulation des derni√®res transactions (se trouvant forc√©ment sur le haut de la pile).</p>
<p>Enfin, on constate l&rsquo;existence d&rsquo;un attribut <code>m_argent_debut_simulation</code> qui correspond au montant poss√©d√© en d√©but de simulation. Cette valeur sera utilis√©e afin de calculer le retour sur investissement des transactions (ROI). Nous ne stockons pas le ROI dans les transactions car le ROI est calcul√© par rapport √† une date donn√©e donc √ßa n&rsquo;aurait pas √©t√© conceptuellement coh√©rent de placer le ROI dans la classe <code>Transaction</code>.</p>
<h3 id="importation-de-l√©volution-dune-cotation">Importation de l&rsquo;√©volution d&rsquo;une cotation</h3>
<p>Un des premiers enjeux de notre logiciel √©tait √©videmment de pouvoir importer des donn√©es trouv√©es sur Internet. Nous pr√©f√©rons cela √† devoir entrer √† la main les donn√©es une √† une.</p>
<h4 id="importation-du-contenu-dun-fichier">Importation du contenu d&rsquo;un fichier</h4>
<p>Pour r√©pondre √† ce besoin, nous n&rsquo;avons pas fait appel √† un pattern particulier. Nous avons utilis√© <code>QFileDialog</code> qui permet √† l&rsquo;utilisateur de choisir un fichier dans son ordinateur comme il en a l&rsquo;habitude.</p>
<p>La conception n&rsquo;√©tait donc pas trop compliqu√©e donc nous avons pu concentrer nos efforts afin de cr√©er des fonctions qui pourront s&rsquo;adapter √† des fichiers aux formatages divers. Actuellement, nous traitons des fichiers de type CSV en pouvant s√©lectionner le s√©parateur √† utiliser. Ce choix r√©pond totalement aux besoins des exemples de fichiers qui nous ont √©t√© fournis.</p>
<p>Pour r√©aliser l&rsquo;extraction des cours, nous utilisons deux fonctions:</p>
<ul>
<li><code>CoursLoader::loadFile</code> qui se charge d&rsquo;ouvrir et de parcourir le fichier &ldquo;verticalement&rdquo;. Chaque ligne est envoy√© √† notre seconde fonction qui renvoie un cours bas√© sur les informations de la ligne. Elle construit un vecteur de cours qui sera li√© √† la cotation choisie par l&rsquo;utilisateur dans le <code>ChandelierGraphManager</code>.</li>
<li><code>CoursLoader::m\_readPeriodValue</code> qui sera chargera d&rsquo;extraire un cours √† partir de la ligne qui lui est envoy√©e.</li>
</ul>
<p>Ce choix tr√®s simple nous permettra de simplement &ldquo;surcharger&rdquo; la fonction <code>CoursLoader::m\_readPeriodValue</code> pour pouvoir parser d&rsquo;autres types de formatage de fichiers autres que CSV. Le d√©veloppeur n&rsquo;aura pas √† changer une seule ligne de <code>CoursLoader::loadFile</code>.</p>
<p>Pour finir, soulignons que ces deux fonctions sont statiques car nous ne voyons pas le besoin d&rsquo;instancier un objet sp√©cifique pour utiliser de telles fonctions.</p>
<h4 id="choix-des-param√®tres-de-simulation">Choix des param√®tres de simulation</h4>
<p>Juste avant de choisir le fichier √† importer, l&rsquo;utilisateur aura √† choisir les param√®tres de la simulation.</p>

<img src="/img/trading_import.png"  class="center"  />


<p>Faisons un petit r√©sum√© de ce qu&rsquo;il se passera d√®s que l&rsquo;utilisateur aura s√©lectionn√© son fichier:</p>
<ul>
<li>Mise √† jour de la taxe du broker dans le <code>TransactionManager</code> √† partir de la valeur entr√©e par l&rsquo;utilisateur.</li>
<li>V√©rification (dans le <code>DeviseManager</code>) de l&rsquo;existence des devises entr√©es</li>
<li>Cr√©ation des devises inexistantes</li>
<li>Mise √† jour des montants poss√©d√©s √† partir des valeurs entr√©es par l&rsquo;utilisateur</li>
<li>V√©rification (dans le <code>CotationManager</code>) de l&rsquo;existence de la cotation</li>
<li>Cr√©ation si elle n&rsquo;existe pas</li>
<li>Importation des donn√©es du fichier dont les cours seront charg√©es dans le <code>ChandelierGraphManager</code>, cours li√©s gr√¢ce √† un <code>map</code> √† la cotation de l&rsquo;√©tape pr√©c√©dente.</li>
<li>Mise √† jour de toutes les visualisation (Porte-monnaie, graphiques, etc.)</li>
</ul>
<p>Nous utilisons donc tous les param√®tres demand√©s dans le sujet. On notera que les valeurs par d√©faut du sujet sont d&rsquo;une part celles des arguments des fonctions mais √©galement sont affich√©es initialement lors du lancement du programme.</p>
<h3 id="interface">Interface</h3>
<p>Notre interface se r√©sume √† une <code>MainWindow</code> sur laquelle tous les √©l√©ments n√©cessaires au projet sont pr√©sents. Nous avons essay√© de s√©parer au maximum cette fen√™tre par bloc pour faciliter l&rsquo;ajout de nouvelles fonctionnalit√©s. Passons en revue les blocs un √† un:</p>

<img src="/img/trading_ui.png"  class="center"  />


<h4 id="bougie">Bougie</h4>
<p>Le bloc bougie affiche les informations relatives √† la bougie sur laquelle a double-cliqu√©e l&rsquo;utilisateur. Notons que lorsqu&rsquo;une transaction manuelle est effectu√©, l&rsquo;affichage passe directement aux informations de la bougie suivante.</p>
<h4 id="indicateurs">Indicateurs</h4>
<p>Les indicateurs sont calcul√©s pour la m√™me bougie que pour la partie du dessus. Notons que certains indicateurs ont besoin d&rsquo;un certain nombre de bougies pr√©c√©dant la bougie courante afin de calculer un indicateur. Par exemple, on ne pourra calculer aucun indicateur pour la premi√®re bougie de nos donn√©es. Cela ne fera pas <em>crasher</em> le logiciel, un simple message informera l&rsquo;utilisateur de la raison de l&rsquo;absence d&rsquo;indicateur.</p>
<h4 id="wallet">Wallet</h4>
<p>Le champ n&rsquo;est pas fixe car nous avons un nombre illimit√© de devises possibles. Le porte-monnaie affiche la valeur poss√©d√© de chaque devise au moment actuel de la simulation.</p>
<h4 id="transactions">Transactions</h4>
<p>Cet espace servira de log des transactions effectu√©es avec les informations demand√©es dans le sujet du projet (Date, Devises concern√©s, Montant poss√©d√© de chaque devise suite √† la transaction et ROI). Notons que lors d&rsquo;un retour en arri√®re, une ligne de &ldquo;Revert&rdquo; appara√Ætra afin de confirmer l&rsquo;annulation et de pouvoir garder une trace compl√®te de ce qui a √©t√© tent√©. Ces logs seront export√©es, lors d&rsquo;un exportation d&rsquo;une session, avec les notes prises ainsi que le fichier de donn√©es.</p>
<h4 id="graphique-en-chandeliers">Graphique en chandeliers</h4>
<p>Il s&rsquo;agit donc de la partie de visualisation des bougies dans leur ensemble. A tout moment est affich√© le graphique li√© √† la cotation choisie dans l&rsquo;espace &ldquo;Control&rdquo; de l&rsquo;interface. L&rsquo;utilisateur pourra donc passer d&rsquo;un graphique √† un autre s&rsquo;il a charger plusieurs fichiers de donn√©es.</p>
<p>Pour zoomer sur une partie du graphique, il suffit de r√©aliser un clic gauche gliss√© sur la zone qui nous int√©resse. Un petit bouton <em>reset</em> est pr√©sent sous le graphique afin de remettre √† z√©ro le zoom (chose compliqu√©e √† faire avec le clic droit gliss√© qui n&rsquo;est pas tr√®s ergonomique).</p>
<h4 id="graphique-des-volumes">Graphique des volumes</h4>
<p>Le fonctionnement est en tout point identique au graphique pr√©c√©demment sauf que ce sont les volumes des cours et non plus les bougies qui sont affich√©s. A noter que les zooms des deux graphiques sont totalement ind√©pendants.</p>
<h4 id="import-data">Import Data</h4>
<p>L&rsquo;utilisateur peut choisir l&rsquo;ensemble des param√®tres de la simulation (les devises, les montants poss√©d√©s, la taxe du broker). Puis il choisira le fichier √† importer. Une fen√™tre de s√©lection de fichier s&rsquo;affichera pour qu&rsquo;il s√©lectionne le fichier de son choix.</p>
<h4 id="control">Control</h4>
<p>Ce bloc est celui destin√© √† la strat√©gie. On peut choisir une strat√©gie manuelle ou une strat√©gie automatique. En automatique, il est possible d&rsquo;importer le XML d√©crivant les d√©cisions prises lors d&rsquo;une session pass√©e. En manuel, on choisit le montant positif ou n√©gatif (achat ou vente) de la transaction.</p>
<p>Il faut avoir, au pr√©alable, cliqu√© sur une bougie du graphique pour choisir la date de d√©part. Ensuite, si on clique sur le carr√©, toutes les transactions sont annul√©es et la simulation est remise √† z√©ro. Si on clique sur les fl√®ches √† droite, une transaction manuelle ou automatique (selon le mode choisi) est effectu√©e et bloqu√©e si le montant dans votre porte-monnaie ne le permet pas. Si on clique sur la double fl√®che pointant √† gauche, on annule la derni√®re transaction effectu√©e.</p>
<p>La remise √† z√©ro peut √™tre utilis√©e afin de recommencer la simulation √† partir d&rsquo;un jour diff√©rent.</p>
<p>Tout au long de la simulation, la date du jour de la transaction √† prendre est constamment affich√©e et est incr√©ment√©e √† chaque transaction effectu√©e.</p>
<p>Ce bloc contient √©galement un √©l√©ment permettant de choisir laquelle des cotations, que nous avons pr√©c√©demment charg√©es, nous voulons afficher. Ce sera sur cette cotation uniquement que porteront les transactions.</p>
<h4 id="notes">Notes</h4>
<p>Cette partie ne demande pas √©norm√©ment de description quant √† son fonctionnement et son utilit√©.</p>
<h4 id="indicateurs-1">Indicateurs</h4>
<p>Pour cette fonctionnalit√©, le choix √©vident fut le design pattern <em>factory</em>. Nous avons donc con√ßu ce package <code>Indicateurs</code> de la mani√®re suivante:</p>

<img src="/img/trading_indicator.png"  class="center"  />


<p>L&rsquo;utilisation de ce design pattern permettra d&rsquo;ajouter tr√®s simplement de nouveaux indicateurs. L&rsquo;essentiel du travail √† effectuer pour cr√©er un nouveau type d&rsquo;indicateur est de cr√©er une nouvelle classe fille de <code>Indicateur</code> de d√©finir sa fonction compute et ses constructeurs (ces derniers sont souvent tr√®s simples √† d√©finir) enfin il faudra ajouter un cas suppl√©mentaire au <code>Create</code> de la factory. L&rsquo;interface se charge d√©j√† de calculer TOUS les indicateurs possibles lors de l&rsquo;affichage des informations d&rsquo;une bougie.</p>
<h4 id="adaptabilit√©-√†-des-√©volutions-futures">Adaptabilit√© √† des √©volutions futures</h4>
<p>Soulignons quelques choix de conception. Indicateur est une classe abstraite car elle a la fonction <code>compute</code> virtuelle pure. Nous essayons toujours de proposer plusieurs constructeurs afin de r√©pondre √† tous les usages pr√©sents et futurs. La fonction <code>SliceCoursEvolution</code> est centrale pour la cr√©ation de nos indicateurs car c&rsquo;est elle qui permettra d&rsquo;extraire les cours que nous utiliserons pour calculer la valeur des indicateurs. Notons qu&rsquo;elle est tr√®s g√©n√©rale et qu&rsquo;elle pourrait √™tre utilis√©e pour d&rsquo;autres usages, d&rsquo;o√π le fait qu&rsquo;elle soit statique.</p>
<p>Une fonction <code>compute</code> a √©t√© cr√©√©e plut√¥t que d&rsquo;int√©grer le calcul de la valeur au constructeur car cela laisse la possibilit√© de modifier les cours concern√©s puis de recalculer l&rsquo;indicateur en prenant en compte des modifications effectu√©es sur des bougies (sans avoir √† cr√©er un nouvelle indicateur et √† re-extraire les cours qui nous int√©resse). Cette possibilit√© n&rsquo;est pas utilis√©e dans notre logiciel mais elle pourrait √™tre utile lors de d√©veloppement futurs.</p>
<p>Nous ne laissons pas la possibilit√© √† l&rsquo;utilisateur de choisir la tol√©rance de chacun des indicateurs. Cependant, il existe bien des arguments dans chaque constructeur d&rsquo;indicateurs pour r√©gler la tol√©rance (une profondeur de calcul en quelque sorte). Dans le projet actuel, nous utilisons syst√©matiquement la valeur par d√©faut de ces arguments mais il est int√©ressant de noter qu&rsquo;il est totalement envisageable de calculer des indicateurs avec une tol√©rance personnalis√©e.</p>
<h4 id="cycle-de-vie-dun-indicateur">Cycle de vie d&rsquo;un indicateur</h4>
<p>Les indicateurs ont une vie tr√®s courte et ont deux utilisations possibles:</p>
<ul>
<li>Par l&rsquo;utilisateur: lors de l&rsquo;affichage des informations d&rsquo;une bougie, l&rsquo;ensemble des indicateurs d&rsquo;une bougie sont calcul√©s puis les objets indicateurs sont d√©truits d√®s l&rsquo;affichage effectu√©.</li>
<li>Par la strat√©gie: la strat√©gie automatique produira les indicateurs dont elle a besoin pour effectuer sa d√©cision puis pourra d√©truire celui-ci. Cependant, la strat√©gie pourra stocker dans son XML les valeurs d&rsquo;indicateurs qui ont orient√© son choix.</li>
</ul>

<img src="/img/trading_candle_click.png"  class="center"  />


<p>Afin de mieux cerner le premier cas d&rsquo;utilisation des indicateurs, nous vous proposons le diagramme de s√©quence ci-dessous qui, nous l&rsquo;esp√©rons, saura traduire un peu plus formellement nos choix.</p>
<hr>
<h3 id="strat√©gie">Strat√©gie</h3>
<h4 id="mode-manuel">Mode Manuel</h4>
<p>Ce mode fut assez simple √† impl√©menter. La seule difficult√© √©tait de cr√©er un curseur pointant sur le cours sujet de la prochaine transaction et de faire d√©placer ce curseur convenablement.</p>
<p>Lorsque cela √©tait fait, nous avions simplement √† r√©cup√©rer les valeurs entr√©es par l&rsquo;utilisateur; v√©rifier que son porte-monnaie permet bien la transaction; cr√©er la transaction; la placer dans notre pile de transactions. Voici un diagramme d&rsquo;√©tat synth√©tisant le cycle de fonctionnement de la strat√©gie manuelle;</p>

<img src="/img/trading_state.png"  class="center"  />


<h4 id="mode-automatique">Mode Automatique</h4>
<p>En mode strat√©gie automatique, c&rsquo;est un algorithme √©crit ou import√© par l&rsquo;utilisateur qui indique √† un jour $J$ s‚Äôil est int√©ressant d‚Äôeffectuer une transaction. La classe <code>Strategy</code> concentre toutes les informations n√©cessaires au bon d√©roulement de celle-ci. Elle a √©t√© pens√©e comme une machine √† √©tats, avec un √©tat non-initialis√©e, √©tat initialis√©e, et √©tat simulation sur tous les jours possibles.</p>
<p>Afin de l&rsquo;ex√©cuter, il faut d&rsquo;abord l&rsquo;initialiser via la fonction <code>Strategy::initSimulation()</code>. Elle r√©cup√®re alors le premier jour auquel on a charg√© un <code>Cours</code> et le d√©finit comme jour de d√©part. Ensuite, la fonction <code>Strategy::nextDay()</code> permet d&rsquo;ex√©cuter la strat√©gie en mode pas-√†-pas : on ex√©cute la transaction si la condition est valid√©e, puis on passe au jour suivant. Enfin, la fonction <code>Strategy::doAllDays()</code> ex√©cute la strat√©gie sur tous les jours auxquels des donn√©es de Cours ont √©t√© charg√©es.</p>
<p>√Ä tout moment, il est possible d‚Äôannuler les transactions effectu√©es par la strat√©gie jusqu‚Äôun jour $J$ exclu via la fonction <code>Strategy::cancelPreviousDays()</code>.</p>
<p>La condition est stock√©e gr√¢ce au design pattern <strong>Composite</strong>, avec pour base <code>StrategyCondition::AbstractCondition</code>. Cela permet d&rsquo;avoir le choix entre mettre une condition concr√®te sur un indicateur (classe <code>StrategyCondition::IndicatorValue</code>), d&rsquo;inverser une condition en la d√©corant √† l&rsquo;aide de <code>StrategyCondition::Not</code>, ou de lier plusieurs conditions entre-elles via un connecteur logique (<code>StrategyCondition::Connector</code>, les connecteurs et, ou, ou exclusif sont des instances de celle-ci). La fa√ßon dont c&rsquo;est construit permet de facilement ajouter de nouveaux types de conditions sans avoir √† modifier tous les fichier, chaque type devant red√©finir (<code>override</code>) les fonctions <code>StrategyCondition::AbstractCondition::eval()</code> (appel√©e pour √©valuer la condition) et <code>StrategyCondition::AbstractCondition::toXml()</code> (appel√©e pour exporter la condition dans un flux XML, d√©taill√© dans la section suivante).</p>
<p>Il est envisageable d&rsquo;avoir une fonction permettant d&rsquo;exporter un <code>QStandartItem</code> √† ajouter dans un <code>QStandardItemModel</code> suivant une certaine colonne correpondant √† la profondeur, et d&rsquo;afficher ensuite √† l&rsquo;utilisateur un <code>QtreeView</code> dont le mod√®le est <code>QStandardItemModel</code> afin d&rsquo;avoir un √©diteur de strat√©gies visuel.</p>
<p><strong>Remarque</strong>: malheureusement, ces fonctions ont √©t√© cod√©es mais nous n&rsquo;avons pas eu le temps de les relier √† l&rsquo;interface. Ce commentaire vaut √©galement pour l&rsquo;importation/exportation qui y est √©troitement li√©e.</p>
<h4 id="importationexportation">Importation/exportation</h4>
<p>Une strat√©gie est import√©e et export√©e au format XML, en appelant r√©ciproquement les fonctions membres <code>Strategy::openStrategy()</code> et <code>Strategy::saveStrategy()</code>, prenant en param√®tre un nom de fichier. Si le fichier import√© est mal structur√© ou ne respecte pas la convention ci-dessous, cela provoquera l‚Äôarr√™t de l‚Äôapplication. Il y a 2 parties distinctes dans le fichier XML :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;strategy&gt;</span>
    <span style="color:#f92672">&lt;condition&gt;</span>
        <span style="color:#f92672">&lt;indicator</span> <span style="color:#a6e22e">from=</span><span style="color:#e6db74">&#34;BTC&#34;</span> <span style="color:#a6e22e">to=</span><span style="color:#e6db74">&#34;USD&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;RSI&#34;</span> <span style="color:#a6e22e">op=</span><span style="color:#e6db74">&#34;&amp;gt;=&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/condition&gt;</span>
    <span style="color:#f92672">&lt;decision</span> <span style="color:#a6e22e">from=</span><span style="color:#e6db74">&#34;BTC&#34;</span> <span style="color:#a6e22e">to=</span><span style="color:#e6db74">&#34;USD&#34;</span> <span style="color:#a6e22e">amount=</span><span style="color:#e6db74">&#34;300&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/strategy&gt;</span>
</code></pre></div><ul>
<li>
<p>Balise <em>/strategy/condition</em>: C‚Äôest l‚Äôarbre de conditions √† v√©rifier. Il y a 3 types de conditions possibles :</p>
<ul>
<li>Balise <em>indicator</em> (orpheline) : Permet de faire un test sur un indicateur d&rsquo;une cotation, on compare si le RSI de la paire \emph{BTC/USD} est plus grand que 0. La devise de base est dans l&rsquo;attribut <em>from</em>, la devise de contrepartie dans <em>to</em>, le type d&rsquo;indicateur dans <em>type</em>, l&rsquo;op√©rateur de comparaison dans <em>op</em> (attention √† bien √©chapper les caract√®res <code>'&lt;'</code> et <code>'&gt;'</code>), et la valeur √† tester dans <em>value</em>. Les op√©rateurs pris en charges sont <code>&quot;&lt;&quot;</code>, <code>&quot;&gt;&quot;</code>, pouvant √™tre suivis de <code>'='</code>, <code>&quot;=&quot;</code> seul, et <code>&quot;!=&quot;</code> pour \og diff√©rent de\fg{}.</li>
<li>Balise <em>not</em> : Permet de d&rsquo;inverser une condition enfant.</li>
<li>Balises <em>or</em>, <em>xor</em>, <em>and</em> : Permet de connecter plusieurs conditions enfants entre-elles via un op√©rateur logique. Si la balise ne contient pas d&rsquo;enfants, alors elle renvoie &ldquo;vraie&rdquo; en permanence.</li>
</ul>
</li>
<li>
<p>Balise <em>/strategy/decision</em>: C&rsquo;est les informations sur la transaction √† effectuer lorsque l&rsquo;arbre des conditions est valid√©. Elles sont d√©crites via les attributs suivants :</p>
<ul>
<li><em>from</em>: Permet de sp√©cifier la devise de base ;</li>
<li><em>to</em>: Permet de sp√©cifier la devise de contrepartie ;</li>
<li><em>amount</em> : Quantit√© maximale de devises sources √† convertir pour un jour donn√©.</li>
</ul>
</li>
</ul>
<p>Il √©tait pr√©vu de mettre une balise <em>/strategy/notes</em>, contenant du texte, afin de stocker les notes prises par l&rsquo;utilisateur, mais nous n&rsquo;avons pas eu le temps d&rsquo;impl√©menter cette partie du parser XML. √Ä noter qu‚Äôil est possible de mettre des commentaires XML uniquement directement dans la balise <em>/strategy</em>. Il est cependant possible de rajouter des attributs, ceux-ci seront simplement ignor√©s lors de l‚Äôimportation.</p>
<h3 id="analyse-des-formes">Analyse des formes</h3>
<p>Pour comprendre ce besoin, il faut tout d&rsquo;abord se poser la question: &ldquo;Qu&rsquo;est ce qu&rsquo;une forme pour une bougie?&quot;. Les formes ne repr√©sentent qu&rsquo;une simple classification des bougies. Ainsi, une <em>doji</em> n&rsquo;est qu&rsquo;une instance de bougie ni plus ni moins (ce n&rsquo;est surtout pas une classe fille ou une bougie ayant un attribut pr√©d√©fini indiquant qu&rsquo;il s&rsquo;agit d&rsquo;une <em>doji</em>). Il doit alors √™tre possible d&rsquo;attribuer un type √† une bougie en connaissant <strong>uniquement</strong> le cours OHLC qui lui est associ√©.</p>
<p>Notons que pour classer les bougies, nous nous appuierons sur une tol√©rance (ayant une valeur par d√©faut stock√©e dans le <code>ChandelierGraphManager</code> afin de centraliser cette valeur et de ne pas avoir d&rsquo;incoh√©rence en ayant des tol√©rances diff√©rentes d&rsquo;une bougie √† l&rsquo;autre). Lors de futures am√©liorations de notre logiciel, cette tol√©rance pourrait √™tre d√©finie par l&rsquo;utilisateur lui-m√™me.</p>
<p>Afin d&rsquo;un peu mieux comprendre toutes nos explications, finissons cette sous-section avec un diagramme synth√©tisant plus formellement nos choix de mod√©lisation:</p>

<img src="/img/trading_pattern.png"  class="center"  />


<h3 id="gestion-des-exceptions">Gestion des exceptions</h3>
<p>Afin de pouvoir d√©buguer plus facilement et de faciliter le d√©veloppement de futurs fonctionnalit√©s nous avons essay√© de standardiser nos exceptions.</p>

<img src="/img/trading_exception.png"  class="center"  />


<p>Sur ce diagramme, nous n&rsquo;avons fait appara√Ætre que 3 classes filles mais il en existe 7 diff√©rentes. De m√™me, l&rsquo;√©num√©ration Type contient en r√©alit√© pr√®s de 30 √©l√©ments.</p>
<p>Expliquons donc ce choix de la multiplicit√© √† tous les niveaux. D&rsquo;une part, nous essayons d&rsquo;avoir un type d&rsquo;exception par paquet de notre architecture afin de pouvoir mieux cibler lorsque les exceptions sont lev√©s. Cela permet √©galement de pouvoir attraper plus proprement et pr√©cis√©ment nos exceptions. L&rsquo;utilisation d&rsquo;une enum√©ration permet √† chaque fonction de retourner un \code{what()} personnalis√© selon le type de l&rsquo;exception. Ainsi, une DeviseException et un IndicatorException ne retourneront pas le m√™me message m√™me si elles ont toutes les deux <code>NEGATIVE_VALUE</code> comme type.</p>
<p>Le projet devenant tr√®s large il √©tait n√©cessaire d&rsquo;avoir le plus de pr√©cisions possibles √† chaque exception lev√©e. Nous ne pouvons nous permettre de t√¢tonner lorsqu&rsquo;il s&rsquo;agit de d√©boggage. Quand un projet grandit et qu&rsquo;il passe de main en main, il faut absolument pouvoir cibler les erreurs rapidement sans trop r√©fl√©chir et cette combinaison de multiples classes filles/√©num√©ration r√©pond tr√®s bien √† cette demande.</p>
<h2 id="le-planning-de-lavancement-du-projet">Le planning de l&rsquo;avancement du projet</h2>
<h3 id="premi√®re-tentative-de-conception">Premi√®re tentative de conception</h3>
<p>Tr√®s rapidement apr√®s la publication du sujet, Trung et Ga√´tan on produit un premier UML global qui a repr√©sent√© une tr√®s bonne base travail pour la suite.</p>
<p>Suite √† cette premi√®re conception, un repo GitLab a √©t√© initialis√© avec les quelques classes fondamentales d√©j√† √©tablies.</p>
<h3 id="relecture-et-correction-du-premier-mod√®le">Relecture et correction du premier mod√®le</h3>
<p>Un peu plus tard, Marc et Alix ont fait une revue du code et surtout de l&rsquo;UML et ont propos√© des corrections et des ajouts aux mod√®les.</p>
<p>Des classes ont, √† nouveau, √©t√© impl√©ment√©es petit √† petit (toutes partiellement).</p>
<p>Trung a √©galement propos√© une premi√®re version de l&rsquo;interface (sans toutes les fonctionnalit√©s mais donnant une id√©e pr√©cise de l&rsquo;UI que nous pourrions adopter).</p>
<p>D√©but mai, Ga√´tan a commenc√© a coder la structure du design pattern composite des conditions de la strat√©gie jusqu&rsquo;au moment o√π l&rsquo;√©cran de son PC principal l&rsquo;a lach√©.</p>
<h3 id="impl√©mentation">Impl√©mentation</h3>
<p>A quelques semaines du rendu, les choses ont acc√©l√©r√©. Ga√´tan, qui a de nouveau un √©cran, s&rsquo;est charg√© de tout ce qui touchait √† la strat√©gie automatique. Marc s&rsquo;est occup√© des indicateurs et de l&rsquo;importation de donn√©es de simulation en aidant √† l&rsquo;int√©gration de ces fonctionnalit√©s √† l&rsquo;interface. Alix s&rsquo;est charg√© de ce qui touchait aux transactions. Marc et Trung ont travaill√© sur le mode manuel. Enfin, Trung a √©t√© tr√®s transversal en cr√©ant l&rsquo;interface et en oeuvrant √† l&rsquo;int√©gration des divers fonctions √† l&rsquo;interface. Il a ainsi √©t√© la source des visualisations de notre interface et √©galement de l&rsquo;analyse de formes.</p>
<p>Il semble √©vident que nous avons tous oeuvr√© au d√©veloppement de fonctions qui se trouvent dans les classes majeures (les managers) car nous avons tous eu besoin √† un moment ou √† un autre d&rsquo;y ajouter des possibilit√©s.</p>
<h3 id="d√©bogage-et-livrables">D√©bogage et livrables</h3>
<p>Pour finir le semestre, Trung a continu√© d&rsquo;int√©grer les derni√®res fonctions produites √† l&rsquo;interface ET a contribu√© au d√©bogage de ce qui devait l&rsquo;√™tre. Ga√´tan a continu√© de d√©velopper et d&rsquo;int√©grer les fonctions li√©es √† la strat√©gie automatique et d&rsquo;√©crire de la documentation. Marc a d√©boguer les probl√®mes li√©s aux classes qu&rsquo;il connaissait le mieux (celles qu&rsquo;il a d√©velopp√©e et celles y √©tant fortement li√©es) et s&rsquo;est charg√© d&rsquo;√©crire le rapport et les diagrammes qui y sont pr√©sents. Enfin, Alix s&rsquo;est charg√© du d√©bogage des probl√®mes li√©s aux transactions, de la d√©monstration vid√©o et de l&rsquo;essentiel de la documentation de nos codes.</p>
<h2 id="fonctionnalit√©s-√†-compl√©ter">Fonctionnalit√©s √† compl√©ter</h2>
<p>Tout au long de ce rapport, nous avons essay√© de mettre en avant la possibilit√© que laissaient nos codes d&rsquo;√™tre compl√©t√©s et am√©lior√©s simplement. Ainsi, nous finirons ce rapport en ouvrant la voie √† quelques pistes d&rsquo;am√©liorations possibles.</p>
<h3 id="strat√©gie-automatique">Strat√©gie automatique</h3>
<p>Finir de connecter la strat√©gie automatique d√©j√† cod√©e √† l&rsquo;interface (tous les boutons sont d√©j√† disponibles). Il y aura s√ªrement un peu de d√©bogage √† faire pour stabiliser le lien entre nos fonctions et l&rsquo;interface.</p>
<h3 id="standardisation-de-lexportation-de-strat√©gie">Standardisation de l&rsquo;exportation de strat√©gie</h3>
<p>En effet, notre exportation/importation de strat√©gies m√©riterait d&rsquo;√™tre un peu retravaill√©e pour √™tre plus condens√©e et un peu plus compr√©hensible par l&rsquo;utilisateur.</p>
<h3 id="mode-pas-√†-pas">Mode pas √† pas</h3>
<p>Nous n&rsquo;avons pas eu le temps de l&rsquo;impl√©menter mais comme dit dans la sous-section traitant du \code{TransactionManager}, il sera tr√®s facilement possible de l&rsquo;impl√©menter sans avoir √† modifier des fonctions existantes.</p>
<h3 id="strat√©gie-multi-cotation">Strat√©gie multi-cotation</h3>
<p>Sachant que notre syst√®me stocke d√©j√† plusieurs cotations en parall√®le, il est totalement envisageable de faire des prises de d√©cision sur plusieurs cours √† la fois pour un jour donn√©.</p>
<h2 id="interface-et-personnalisation">Interface et personnalisation</h2>
<h3 id="ergonomie">Ergonomie</h3>
<p>Nous n&rsquo;avons pas consacr√© un temps trop grand sur l&rsquo;interface donc certains boutons pourraient √™tre mal utilis√©s √† cause d&rsquo;une incompr√©hension de sa signification.</p>
<h3 id="personnalisation-pouss√©e">Personnalisation pouss√©e</h3>
<p>Nous pouvons pousser la personnalisation de la simulation plus loin en ajoutant des param√®tres comme la tol√©rance de classification des bougies. On pourra √©galement int√©grer tr√®s simplement l&rsquo;importation de fichier sur des formats autres que le CSV (en commen√ßant par automatiquement d√©tecter le s√©parateur du CSV).</p>

            </div>
        </article>
        <h2 id="end"></h2>
        <hr />

        <div class="post-info">
  				<p>
  					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://ichbinfrog.github.io/tags/oop">OOP</a></span><span class="tag"><a href="https://ichbinfrog.github.io/tags/c&#43;&#43;">C&#43;&#43;</a></span>
  				</p>
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2022</span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span><a href="https://themes.gohugo.io/hugo-theme-hello-friend-ng/">hello-friend-ng</a> Theme for <a href="http://gohugo.io">Hugo</a> by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" integrity="sha512-3HFukJLJggt3&#43;W2ilNASCu6xibW86pdSMJ6&#43;on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script>



    </body>
</html>
