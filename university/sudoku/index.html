<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="Ce travail a √©t√© fait avec Marc DAMIE dans le cadre de l&amp;rsquo;UV IA02
 Repr√©sentation d&amp;rsquo;une grille Nous avons d√©cid√© de repr√©senter une grille comme √©tant une &amp;ldquo;matrice&amp;rdquo;, c&amp;rsquo;est-√†-dire une liste avec neuf listes imbriqu√©es avec neuf √©l√©ments dans chaque liste. Pour la repr√©sentation d&amp;rsquo;une cellule vide, nous avons d√©cid√© d&amp;rsquo;utiliser une variable anonyme _ , la variable anonyme, elle, peut s&amp;rsquo;unifier avec tout caract√®re et donc avec 0 (propri√©t√© que l&amp;rsquo;on utilisera pour le programme qui suit)." />
<meta name="keywords" content=", prolog, sudoku" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://ichbinfrog.github.io/university/sudoku/" />
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$']],
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            TeX: {
                equationNumbers: { autoNumber: "AMS" },
                extensions: ["AMSmath.js", "AMSsymbols.js"]
            }
        }
    });
    MathJax.Hub.Queue(function () {
        
        
        
        var all = MathJax.Hub.getAllJax(), i;
        for (i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });

    MathJax.Hub.Config({
        
        TeX: { equationNumbers: { autoNumber: "AMS" } }
    });
</script>


    <title>
        
            üá´üá∑ Prolog sudoku solver :: Hoang Quoc Trung 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.min.cbd9ce6c3a26d6c4a5eb4b8834c18d83518654bd8bac1fc8160486f336181c9a.css">


    
        <link rel="stylesheet" type="text/css" href="/css/post.css">
    





<meta itemprop="name" content="üá´üá∑ Prolog sudoku solver">
<meta itemprop="description" content="Ce travail a √©t√© fait avec Marc DAMIE dans le cadre de l&rsquo;UV IA02
 Repr√©sentation d&rsquo;une grille Nous avons d√©cid√© de repr√©senter une grille comme √©tant une &ldquo;matrice&rdquo;, c&rsquo;est-√†-dire une liste avec neuf listes imbriqu√©es avec neuf √©l√©ments dans chaque liste. Pour la repr√©sentation d&rsquo;une cellule vide, nous avons d√©cid√© d&rsquo;utiliser une variable anonyme _ , la variable anonyme, elle, peut s&rsquo;unifier avec tout caract√®re et donc avec 0 (propri√©t√© que l&rsquo;on utilisera pour le programme qui suit).">
<meta itemprop="datePublished" content="2018-12-21T16:12:56&#43;02:00" />
<meta itemprop="dateModified" content="2018-12-21T16:12:56&#43;02:00" />
<meta itemprop="wordCount" content="1240">
<meta itemprop="image" content="https://ichbinfrog.github.io/"/>



<meta itemprop="keywords" content="prolog,sudoku," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://ichbinfrog.github.io/"/>

<meta name="twitter:title" content="üá´üá∑ Prolog sudoku solver"/>
<meta name="twitter:description" content="Ce travail a √©t√© fait avec Marc DAMIE dans le cadre de l&rsquo;UV IA02
 Repr√©sentation d&rsquo;une grille Nous avons d√©cid√© de repr√©senter une grille comme √©tant une &ldquo;matrice&rdquo;, c&rsquo;est-√†-dire une liste avec neuf listes imbriqu√©es avec neuf √©l√©ments dans chaque liste. Pour la repr√©sentation d&rsquo;une cellule vide, nous avons d√©cid√© d&rsquo;utiliser une variable anonyme _ , la variable anonyme, elle, peut s&rsquo;unifier avec tout caract√®re et donc avec 0 (propri√©t√© que l&rsquo;on utilisera pour le programme qui suit)."/>



    <meta property="og:title" content="üá´üá∑ Prolog sudoku solver" />
<meta property="og:description" content="Ce travail a √©t√© fait avec Marc DAMIE dans le cadre de l&rsquo;UV IA02
 Repr√©sentation d&rsquo;une grille Nous avons d√©cid√© de repr√©senter une grille comme √©tant une &ldquo;matrice&rdquo;, c&rsquo;est-√†-dire une liste avec neuf listes imbriqu√©es avec neuf √©l√©ments dans chaque liste. Pour la repr√©sentation d&rsquo;une cellule vide, nous avons d√©cid√© d&rsquo;utiliser une variable anonyme _ , la variable anonyme, elle, peut s&rsquo;unifier avec tout caract√®re et donc avec 0 (propri√©t√© que l&rsquo;on utilisera pour le programme qui suit)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ichbinfrog.github.io/university/sudoku/" />
<meta property="og:image" content="https://ichbinfrog.github.io/"/>
<meta property="article:published_time" content="2018-12-21T16:12:56+02:00" />
<meta property="article:modified_time" content="2018-12-21T16:12:56+02:00" /><meta property="og:site_name" content="Hoang Quoc Trung" />






    <meta property="article:published_time" content="2018-12-21 16:12:56 &#43;0200 &#43;0200" />








    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">ichbinfrog</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://ichbinfrog.github.io/projects">0_projects</a></li><li><a href="https://ichbinfrog.github.io/internships">1_internships</a></li><li><a href="https://ichbinfrog.github.io/university">2_uni_works</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title" id="top"><a href="https://ichbinfrog.github.io/university/sudoku/">üá´üá∑ Prolog sudoku solver</a></h2>
            <aside id="toc"><style>
.toc {
    position: fixed;
    top: 50%;
    left: 2%;
    width: 20%;
    transform: translateY(-50%);
    border-radius: 5px;
    padding-bottom: 1rem;
}

.toc a {
    text-decoration: none;
    color: gray;
}

.toc a:hover {
    opacity: 0.5;
}

.toc ul {
    list-style: ">  ";
}

.toc-title {
    text-decoration: underline;
}
</style>

<div class="toc">
    <div class="toc-title">Table of Contents</div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#repr√©sentation-dune-grille">Repr√©sentation d&rsquo;une grille</a>
      <ul>
        <li><a href="#inconv√©nients">Inconv√©nients</a></li>
        <li><a href="#avantages">Avantages</a></li>
        <li><a href="#manipulation-de-la-matrice">Manipulation de la matrice</a></li>
      </ul>
    </li>
    <li><a href="#recherche-dune-solution">Recherche d&rsquo;une solution</a>
      <ul>
        <li><a href="#g√©n√©ration-dune-valeur-valide-pour-une-case-donn√©e">G√©n√©ration d&rsquo;une valeur valide pour une case donn√©e</a></li>
        <li><a href="#g√©n√©ration-dune-ligne-valide">G√©n√©ration d&rsquo;une ligne valide</a></li>
        <li><a href="#g√©n√©ration-dune-solution">G√©n√©ration d&rsquo;une solution</a></li>
      </ul>
    </li>
    <li><a href="#g√©n√©ration-avec-gradient-de-difficult√©s">G√©n√©ration avec gradient de difficult√©s</a>
      <ul>
        <li><a href="#digging-hole">Digging hole</a></li>
        <li><a href="#propagation">Propagation</a></li>
      </ul>
    </li>
    <li><a href="#am√©liorations-possibles">Am√©liorations possibles</a>
      <ul>
        <li><a href="#linterface">L&rsquo;interface</a></li>
        <li><a href="#la-difficult√©">La difficult√©</a></li>
      </ul>
    </li>
  </ul>
</nav>
    <ul>
    <li><a href="#top">Top</a></li>
    <li><a href="#end">End</a></li>
    </ul>
</div></aside>

            

            <div class="post-content">
                <blockquote>
<p>Ce travail a √©t√© fait avec Marc DAMIE dans le cadre de l&rsquo;UV IA02</p>
</blockquote>
<h2 id="repr√©sentation-dune-grille">Repr√©sentation d&rsquo;une grille</h2>

<img src="/img/sudoku_representation.png"  class="center"  />


<p>Nous avons d√©cid√© de repr√©senter une grille comme √©tant une &ldquo;matrice&rdquo;, c&rsquo;est-√†-dire une liste avec neuf listes imbriqu√©es avec neuf √©l√©ments dans chaque liste. Pour la repr√©sentation d&rsquo;une cellule vide, nous avons d√©cid√© d&rsquo;utiliser une variable anonyme _ , la variable anonyme, elle, peut s&rsquo;unifier avec tout caract√®re et donc avec 0 (propri√©t√© que l&rsquo;on utilisera pour le programme qui suit). Avec cette structure, nous en tirons les avantages et les inconv√©nients suivants:</p>
<h3 id="inconv√©nients">Inconv√©nients</h3>
<p>Avec cette structure, ins√©rer une valeur dans une cellule n√©cessite un temps de calcul plus important vu que l&rsquo;on doit parcourir r√©cursivement l&rsquo;ensemble de la liste (ce qui, dans le pire des cas, engendrait 81 op√©rations). A ceci, se rajoute le fait que l&rsquo;acc√®s √† une certaine colonne n&rsquo;est pas directe, ce qui va r√©duire l&rsquo;efficacit√© des tests au cours de la g√©n√©ration de la grille (notamment celui de l&rsquo;unicit√© sur une colonne). Finalement, sa performance n&rsquo;est pas optimale pour les grilles presque vides, vu qu&rsquo;elle associe √† chaque case vide une valeur 0 et peut-√™tre une question sur l&rsquo;optimisation de l&rsquo;espace m√©moire utilis√©e.</p>
<h3 id="avantages">Avantages</h3>
<p>Elle demeurent, n√©anmoins, plus adapt√©e que la repr√©sentation d&rsquo;une grille par une base de faits dynamiques (ex; pr√©dicat board(I,J,Val) repr√©sentant qu&rsquo;√† la i-√®me ligne, j-√®me colonne, il y a la valeur Val) car elle permet facilement de tester la validit√© d&rsquo;une insertion (le backtracking sur les assertions dynamiques √©tant presque impossible). Contrairement √† la v√©rification de la validit√© des colonnes, l&rsquo;unicit√© des lignes et des carr√©es 3x3 peuvent √™tre v√©rifi√©es assez rapidement avec cette matrice. La repr√©sentation matricielle, elle, simplifie aussi les op√©rations de propagation (cf G√©n√©ration de grille) telles que les rotations, les permutations de grilles.</p>
<h3 id="manipulation-de-la-matrice">Manipulation de la matrice</h3>
<p>Pour manipuler cette structure, nous avons appuy√© notre code sur le pr√©dicat element(I,J,B,X). Celui-ci nous permettra d&rsquo;obtenir l&rsquo;√©l√©ment √† la position I,J. Il offre une certaine optimisation car on peut obtenir n&rsquo;importe quel √©l√©ment en maximum 18 op√©rations: n a besoin de 9 op√©rations pour atteindre la 9i√®me ligne et 9 autres pour atteindre le 9i√®me √©l√©ment de celle-ci.</p>
<h2 id="recherche-dune-solution">Recherche d&rsquo;une solution</h2>
<h3 id="g√©n√©ration-dune-valeur-valide-pour-une-case-donn√©e">G√©n√©ration d&rsquo;une valeur valide pour une case donn√©e</h3>
<p>La brique de base de notre r√©solution est de g√©n√©rer pour une case donn√©e une valeur valide pour la ligne, la colonne et le carr√©. Par valeur valide, on entend une valeur unique sur la ligne, la colonne et le carr√©. On utilise alors trois pr√©dicats qu&rsquo;on unifiera: un pr√©dicat propose les nombres absents de la ligne, un autre les nombre absents de la colonne et un dernier les nombres absents du carr√©. Ainsi, pour obtenir une valeur valide pour la case, on unifie les trois.</p>
<p>Notons d√®s maintenant qu&rsquo;ajouter une valeur valide ne garantit pas que cela m√®nera √† une solution. En effet, il existe des grilles valides mais sans solution.</p>
<h3 id="g√©n√©ration-dune-ligne-valide">G√©n√©ration d&rsquo;une ligne valide</h3>
<p>La seconde √©tape est de g√©n√©rer une ligne valide, c&rsquo;est-√†-dire une ligne remplie de valeurs valides. Elles sont donc diff√©rentes de chacune des autres valeurs de leurs colonnes et carr√©s respectifs. Cette g√©n√©ration se fait de mani√®re r√©cursive: pour la position I, on r√©cup√®re la liste ayant les indices sup√©rieurs √† I remplis avec de valeurs valides. On g√©n√®re ensuite une valeur valide pour la position I dans cette liste ayant √©t√© obtenue r√©cursivement. En faisant un appel avec l&rsquo;indice 1, on obtient donc une liste r√©sultat contenant uniquement des valeurs uniques. Dans cette g√©n√©ration on ne supprime √©videmment pas les valeurs d√©j√† pr√©sentes dans la liste.</p>
<h3 id="g√©n√©ration-dune-solution">G√©n√©ration d&rsquo;une solution</h3>
<p>L&rsquo;√©tape finale est un peu semblable √† l&rsquo;√©tape pr√©c√©dente mais √† une √©chelle sup√©rieure. On utilise un pr√©dicat r√©cursif: pour la ligne I, on r√©cup√®re r√©cursivement un board rempli avec des lignes valides aux indices sup√©rieurs √† I. On ins√®re donc une ligne valide √† la position I.La ligne I devra donc √™tre valide par rapport au tableau de d√©part compl√©t√© par les valeurs valides g√©n√©r√©es pr√©c√©demment. Si pour une ligne I, il n&rsquo;existe pas de ligne valide, le programme va faire un retour arri√®re et changer les lignes pr√©c√©demment g√©n√©r√©es.</p>
<h2 id="g√©n√©ration-avec-gradient-de-difficult√©s">G√©n√©ration avec gradient de difficult√©s</h2>
<p>Tout d&rsquo;abord on utilise produit une grille valide remplie avec une dizaine de valeurs al√©atoires. ensuite on utilise notre algorithme de r√©solution pour obtenir une solution de la grille √† laquelle on va supprimer des cellules pour que l&rsquo;utilisateur puisse jouer. On a rempli partiellement la grille de mani√®re al√©atoire pour obtenir √† chaque partie de nouvelles grilles. En effet, le r√©solveur r√©soudra toujours de la m√™me mani√®re une grille vide donc on aura un manque de diversit√© dans les grilles produites. La difficult√© d&rsquo;un sudoku provient de trois facteurs majeurs;</p>
<ul>
<li>le nombre de cellules initiales donn√©es au joueur</li>
</ul>

<img src="/img/sudoku_cells.png"  class="center"  />


<ul>
<li>le choix de l&rsquo;algorithme de &ldquo;digging hole&rdquo; (c&rsquo;est-√†-dire de parcours de la grille et de v√©rifications des cellules candidates pour supprimer)</li>
<li>l&rsquo;application des propagations √©quivalentes telles que les rotations, les permutations des colonnes (1 par 1 ou 3 par 3).</li>
</ul>
<h3 id="digging-hole">Digging hole</h3>
<p>On distingue d√®s lors quatre type de s√©quences d&rsquo;√©tablissement des digging holes;</p>
<ul>
<li>Left to Right Then To Bottom</li>
<li>Wandering along S</li>
<li>Jumping One Cell</li>
<li>Randomizing globally</li>
</ul>

<img src="/img/sudoku_dig.png"  class="center"  />


<p>Dans notre algorithme, nous avons impl√©menter, par faute de temps, que deux types de s√©quences. Pour les difficult√©s faciles et extremement faciles, nous utilisons une s√©quence Randomized Globally, c&rsquo;est-√†-dire que l&rsquo;on g√©n√®re al√©atoirement un couple (I,J) puis on v√©rifie si la suppression de cette cellule maintient l&rsquo;unicit√© de la solution. Pour les difficult√©s moyennes et difficiles, nous obtenons la grille en supprimant les cellules obtenues par Jumping One Cell (on g√©n√®re d&rsquo;abord un couple puis on le fait d√©placer selon des directions al√©atoires). Avec cette algorithme de d√©placement de la cellule √† supprimer, il est possible que l&rsquo;on rencontre un √©chec o√π toutes les cellules adjacentes sont d√©j√† supprim√©es. Dans ce cas, il va falloir relancer la suppression sur une cellule al√©atoire.</p>
<h3 id="propagation">Propagation</h3>
<p>Pour les sudoku de difficult√©s importantes, il est n√©cessaire que les sym√©tries, ou les motifs ne soient pas visibles au joueur. D√®s lors, on doit appliquer des algorithmes qui permettent, √† partir d&rsquo;une grille valide remplie, d&rsquo;en g√©n√©rer une autre sans trop de calculs compl√©mentaires. Ces algorithmes, nomm√©s des algorithmes de propagation telles que la rotation de la matrice, l&rsquo;√©change des colonnes permettent masquer ses motifs, tout en pr√©servant l&rsquo;ensemble des propri√©t√©s d&rsquo;un sudoku valide. Nous avons impl√©ment√©s ces permutations pour les jeux &ldquo;medium&rdquo; et &ldquo;hard&rdquo;.</p>

<img src="/img/sudoku_permutation.png"  class="center"  />


<h2 id="am√©liorations-possibles">Am√©liorations possibles</h2>
<h3 id="linterface">L&rsquo;interface</h3>
<p>D&rsquo;une part, jouer dans la console n&rsquo;est pas tr√®s pratique, particuli√®rement pour le sudoku. Il serait donc int√©ressant de g√©n√©rer une fen√™tre.
D&rsquo;autre part, nous n&rsquo;avons pas r√©ussi √† cr√©er une boucle de g√©n√©ration de solutions illimit√©e. En effet, notre boucle aura un nombre pr√©cis d&rsquo;it√©rations. Nous n&rsquo;avons pas r√©ussi √† faire une boucle qui s&rsquo;arr√™te soit si le joueur le souhaite, soit si il n&rsquo;y a plus de solutions.
De plus, on pourrait faire un mode qui guide un joueur d√©butant dans la r√©solution d&rsquo;une premi√®re grille (une sorte de tutoriel).</p>
<h3 id="la-difficult√©">La difficult√©</h3>
<p>Nous avons essay√© de nous approprier rapidement l&rsquo;article mais on se rend bien compte qu&rsquo;il existe des cas o√π l√† g√©n√©ration de grilles ne fournit pas forc√©ment une grille du niveau souhait√© (ceci est surtout vrai pour les grilles de difficult√©s moyenne et difficile). On pourrait donc relire cette article et retravailler notre code. De plus, avec un peu plus de temps, on pourrait le confronter avec d&rsquo;autres articles de la litt√©rature traitant du sudoku (de mani√®re acad√©mique).</p>

            </div>
        </article>
        <h2 id="end"></h2>
        <hr />

        <div class="post-info">
  				<p>
  					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://ichbinfrog.github.io/tags/prolog">prolog</a></span><span class="tag"><a href="https://ichbinfrog.github.io/tags/sudoku">sudoku</a></span>
  				</p>
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2022</span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span><a href="https://themes.gohugo.io/hugo-theme-hello-friend-ng/">hello-friend-ng</a> Theme for <a href="http://gohugo.io">Hugo</a> by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" integrity="sha512-3HFukJLJggt3&#43;W2ilNASCu6xibW86pdSMJ6&#43;on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script>



    </body>
</html>
